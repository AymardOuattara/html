(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[262],{4262:function(e,t,l){"use strict";l.r(t),l.d(t,{WorkflowModule:function(){return ee}});var a=l(38583),o=l(3679),i=l(977),s=l(65461),r=l(66782),n=l(95987),p=l(99688);const m={configs:[{}]},u={},d=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-2",key:"codeClient",type:"input",templateOptions:{label:"Code client"}}]},{template:"<center><p>Les informations relatives au demandeur sont r\xe9cup\xe9r\xe9es en arri\xe8re plan.</p></center>"},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement du bon blanc"},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",key:"motifclient",type:"textarea",templateOptions:{label:"Motif"}},{className:"flex-3",key:"affectationBon",type:"input",templateOptions:{label:"Affectation"}},{className:"flex-3",key:"montant",type:"input",templateOptions:{label:"Montant",type:"number"}}]}]}]},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-2",key:"total",type:"input",templateOptions:{type:"number",label:"Total",placeholder:"en FCFA"}},{className:"flex-2",key:"totalLettre",type:"input",templateOptions:{label:"Montant total en lettre"}},{className:"flex-1",key:"timbre",type:"input",templateOptions:{type:"number",label:"Timbre per\xe7u",placeholder:"en FCFA"}},{className:"flex-2",key:"dateValidation",type:"input",templateOptions:{label:"Date d'\xe9mission de demande",type:"date"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(m)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"nomChef",type:"input",templateOptions:{label:"Nom"}},{className:"flex-3",key:"prenomChef",type:"input",templateOptions:{label:"Prenom(s)"}},{className:"flex-2",key:"codeClient",type:"input",templateOptions:{label:"Code client"}},{className:"flex-2",key:"matricule",type:"input",templateOptions:{label:"Matricule"}},{className:"flex-10",key:"date",type:"input",templateOptions:{label:"Date de validation",type:"date"}}]},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9es \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"},{fieldGroup:[{key:"submitChef",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitChef").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||!l.form.valid}},{key:"refuserChef",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuserChef").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||"soumis"===l.form.get("submitChef").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserChef"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administrative et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",key:"dateDAF",type:"input",templateOptions:{type:"date",label:"date"}},{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{type:"number",label:"Imputation budgetaire",placeholder:"en CFA",change:e=>{if(null!=e.form.get("imputationBudget").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",placeholder:"en CFA",change:e=>{if(null!=e.form.get("imputationBudget").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0,placeholder:"en CFA"}}]}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuser").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]}];var f=l(37716),c=l(44212),b=l(18859),g=l(52121),y=l(68058),x=l(4768),h=l(28723);let O=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=m,this.form.options=u,this.form.fields=d,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"cash-receipt")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["cash-receipt"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","CashReceipt ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const v={},k={},C=[{fieldGroup:[{key:"numDebit",type:"input",templateOptions:{type:"number",label:"Numero de debit"},defaultValue:1}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-7",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom du responsable du demandeur",readonly:!0}},{className:"flex-3",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-3",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomDemandeur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}}]},{fieldGroup:[{template:"<p>Veuillez indiquer les besoins.</p>"},{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un V\xe9hicule"},fieldArray:{wrappers:["accordion-wrapper"],fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",templateOptions:{label:"V\xe9hicule \xe0 c\xe9der"},fieldGroup:[{className:"flex-3",key:"marqueVehicule",type:"input",templateOptions:{label:"Marque du v\xe9hicule"}},{className:"flex-3",key:"modeleVehicule",type:"input",templateOptions:{label:"Mod\xe8le du v\xe9hicule"}},{className:"flex-3",key:"numeroChassis",type:"input",templateOptions:{label:"Num\xe9ro de ch\xe2ssis"}},{className:"flex-10",key:"nomExProprio",type:"input",templateOptions:{label:"Ancien detenteur du v\xe9hicule"}},{className:"flex-3",key:"dateCession",type:"input",templateOptions:{type:"date",label:"Date de cession du v\xe9hicule"}},{className:"flex-3",key:"DebutPeriode",type:"input",templateOptions:{type:"date",label:"D\xe9but de p\xe9riode d'acquisition"}},{className:"flex-3",key:"FinPeriode",type:"input",templateOptions:{type:"date",label:"Fin de p\xe9riode d'acquisition"}},{className:"flex-10",key:"prixAchat",type:"input",templateOptions:{label:"Prix d'achat"}},{className:"flex-3",type:"input",key:"quantite",templateOptions:{label:"Quantit\xe9",type:"number",placeholder:"Nombre de v\xe9hicules pour ce mod\xe8le",required:!0,change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("montantCession").value){let t=e.form.get("quantite").value*e.form.get("montantCession").value;e.form.get("montantCession").setValue(t)}},defaultValue:1}},{className:"flex-3",type:"input",key:"montantCession",templateOptions:{label:"Montant de Cession",type:"number",placeholder:"En cfa",required:!0,change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("montantCession").value){let t=e.form.get("quantite").value*e.form.get("montantCession").value;e.form.get("montantModel").setValue(t)}}}},{className:"flex-3",type:"input",key:"montantModel",templateOptions:{type:"number",label:"Montant total de cession",readonly:!0}}]}]}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(v)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuser").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administrative et financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0,placeholder:"en CFA"}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuser").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]}];let N=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=v,this.form.options=k,this.form.fields=C,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"disposal-of-vehicles")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["disposal-of-vehicles"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","DisposalOfVehicles ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const D={configs:[{}]},V={},w=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"motifDemandeur",type:"textarea",templateOptions:{label:"Motif de demande"}}]},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement de la demande d'achat"},fieldGroup:[{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un article"},fieldArray:{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-4",type:"input",key:"achat",templateOptions:{label:"Libell\xe9 de l'achat",placeholder:"Nom"}},{className:"flex-1",type:"input",key:"quantite",templateOptions:{label:"Quanti\xe9",type:"number",placeholder:"Nombre",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-1",type:"input",key:"prixUnitaire",templateOptions:{label:"Prix Unitaire",type:"number",placeholder:"En cfa",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-3",type:"input",key:"montant",templateOptions:{type:"number",label:"Montant en cfa",placeholder:"en cfa",readonly:!0}}]}}]}]},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-2",key:"total",type:"input",templateOptions:{type:"number",label:"Total",placeholder:"en FCFA"}},{className:"flex-2",key:"totalLettre",type:"input",templateOptions:{label:"Montant total en lettre"}},{className:"flex-1",key:"timbre",type:"input",templateOptions:{type:"number",label:"Timbre per\xe7u",placeholder:"en FCFA"}},{className:"flex-2",key:"dateSoumission",type:"input",templateOptions:{label:"Date de Soumission",type:"date"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(D)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",key:"dateChef",type:"input",templateOptions:{label:"Date",type:"date"}},{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"}]},{fieldGroup:[{key:"submitChef",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitChef").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||!l.form.valid}},{key:"refuserChef",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuserChef").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||"soumis"===l.form.get("submitChef").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserChef"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Admnistrative et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-1",key:"dateChef",type:"input",templateOptions:{label:"Date",type:"date"}},{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",placeholder:"en CFA",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",placeholder:"en CFA",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0,placeholder:"en CFA"}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{key:"submitDAF",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitDAF").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||!l.form.valid}},{key:"refuserDAF",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuserDAF").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||"soumis"===l.form.get("submitDAF").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserDAF"}}]}]}];let A=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=D,this.form.options=V,this.form.fields=w,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"order-sheet")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["order-sheet"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","OrderSheet ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const T={configs:[{}]},F={},S=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"motifDemandeur",type:"textarea",templateOptions:{label:"Motif de demande"}}]},{template:"<center><p>Les informations relatives au demandeur sont r\xe9cup\xe9r\xe9es en arri\xe8re plan.</p></center>"},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement de la demande d'achat"},fieldGroup:[{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un article"},fieldArray:{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-4",type:"input",key:"achat",templateOptions:{label:"Libell\xe9 de l'achat",placeholder:"Nom"}},{className:"flex-1",type:"input",key:"quantite",templateOptions:{label:"Quanti\xe9",type:"number",placeholder:"Nombre",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-1",type:"input",key:"qteStock",templateOptions:{label:"Qt\xe9 en stock",type:"number"}},{className:"flex-1",type:"input",key:"prixUnitaire",templateOptions:{label:"Prix Unitaire",type:"number",placeholder:"En cfa",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-3",type:"input",key:"montant",templateOptions:{type:"number",label:"Montant en cfa",placeholder:"en cfa",readonly:!0}}]}}]}]},{key:"dateDemande",type:"input",templateOptions:{label:"Date",type:"date"}},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(T)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-1",key:"date",type:"input",templateOptions:{label:"Date",type:"date"}},{className:"flex-2",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}}]},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuser").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administration et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-1",key:"date",type:"input",templateOptions:{label:"Date",type:"date"}},{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",placeholder:"en CFA",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",placeholder:"en CFA",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuser").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]}];let G=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=T,this.form.options=F,this.form.fields=S,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"processing-of-purchase-orders")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["processing-of-purchase-orders"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","ProcessingOfPurchaseOrders ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const P={configs:[{}]},R={},q=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"motifDemandeur",type:"textarea",templateOptions:{label:"Motif de demande"}}]},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement de la demande d'achat"},fieldGroup:[{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un article"},fieldArray:{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-4",type:"input",key:"achat",templateOptions:{label:"Libell\xe9 de l'achat",placeholder:"Nom"}},{className:"flex-1",type:"input",key:"quantite",templateOptions:{label:"Quanti\xe9",type:"number",placeholder:"Nombre",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-1",type:"input",key:"prixUnitaire",templateOptions:{label:"Prix Unitaire",type:"number",placeholder:"En cfa",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-3",type:"input",key:"montant",templateOptions:{type:"number",label:"Montant en cfa",placeholder:"en cfa",readonly:!0}}]}}]}]},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-2",key:"total",type:"input",templateOptions:{type:"number",label:"Total",placeholder:"en FCFA"}},{className:"flex-2",key:"totalLettre",type:"input",templateOptions:{label:"Montant total en lettre"}},{className:"flex-1",key:"timbre",type:"input",templateOptions:{type:"number",label:"Timbre per\xe7u",placeholder:"en FCFA"}},{className:"flex-2",key:"dateSoumission",type:"input",templateOptions:{label:"Date de Soumission",type:"date"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(P)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"date",type:"input",templateOptions:{label:"Date",type:"date"}},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuser").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administrative et financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",key:"dateDAF",type:"input",templateOptions:{label:"date",type:"date"}},{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-4",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse"},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande"},defaultValue:!1}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuser").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]}];let _=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=P,this.form.options=R,this.form.fields=q,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"numdemande",header:"N\xb0 Demande d'achat"},{field:"libell\xe9",header:"libell\xe9"},{field:"dateDemande",header:"R\xe9dig\xe9 le",type:"date"},{field:"status",header:"Statut",type:"status",trueText:"Valid\xe9",falseText:"r\xe9j\xe9t\xe9"},{field:"waiting",header:"En Attente ?",type:"status",trueText:"oui",falseText:"mettre \xe0 jour"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"purchase-request")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["purchase-request"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","PurchaseRequest ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const z={},M={},B=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"montant",type:"input",templateOptions:{label:"Montant de l'acompte"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",key:"dateValidation",type:"input",templateOptions:{label:"date"}},{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}}]},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"},{fieldGroup:[{key:"submitChef",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitChef").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||!l.form.valid}},{key:"refuserChef",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuserChef").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||"soumis"===l.form.get("submitChef").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserChef"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Directeur Administrative et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-10",type:"input",templateOptions:{label:"date",type:"date"}},{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-4",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{key:"submitDAF",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitDAF").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||!l.form.valid}},{key:"refuserDAF",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuserDAF").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||"soumis"===l.form.get("submitDAF").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserDAF"}}]}]}];let j=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=z,this.form.options=M,this.form.fields=B,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"request-for-advance-and-down-payment")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["request-for-advance-and-down-payment"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","RequestForAdvanceAndDownPayment ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();const L={configs:[{}]},U={},E=[{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-6",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom(s) du responsable",readonly:!0}},{className:"flex-4",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-2",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-2",key:"prenomDemandeur",type:"input",templateOptions:{label:"prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"motifDemandeur",type:"textarea",templateOptions:{label:"Motif de demande"}}]},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement de la demande d'achat"},fieldGroup:[{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un article"},fieldArray:{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-4",type:"input",key:"achat",templateOptions:{label:"Libell\xe9 de l'achat",placeholder:"Nom"}},{className:"flex-1",type:"input",key:"quantite",templateOptions:{label:"Quanti\xe9",type:"number",placeholder:"Nombre",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-1",type:"input",key:"prixUnitaire",templateOptions:{label:"Prix Unitaire",type:"number",placeholder:"En cfa",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-3",type:"input",key:"montant",templateOptions:{type:"number",label:"Montant en cfa",placeholder:"en cfa",readonly:!0}}]}}]}]},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-2",key:"total",type:"input",templateOptions:{type:"number",label:"Total",placeholder:"en FCFA"}},{className:"flex-2",key:"totalLettre",type:"input",templateOptions:{label:"Montant total en lettre"}},{className:"flex-1",key:"timbre",type:"input",templateOptions:{type:"number",label:"Timbre per\xe7u",placeholder:"en FCFA"}},{className:"flex-2",key:"dateSoumission",type:"input",templateOptions:{label:"Date de Soumission",type:"date"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(L)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"dateChef",type:"input",templateOptions:{label:"Date",type:"date"}},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"}]},{fieldGroup:[{className:"flex-1",key:"submitChef",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitChef").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||!l.form.valid}},{key:"refuserChef",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuserChef").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserChef").value||"soumis"===l.form.get("submitChef").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserChef"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserChef"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administrative et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0}},{className:"flex-10",key:"dateDAF",type:"input",templateOptions:{label:"Date",type:"date"}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{className:"flex-1",type:"button",key:"submitDAF",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitDAF").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||!l.form.valid}},{key:"refuserDAF",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuserDAF").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuserDAF").value||"soumis"===l.form.get("submitDAF").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuserDAF"}}]}]}];let Y=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=L,this.form.options=U,this.form.fields=E,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"request-for-overheads")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["request-for-overheads"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","RequestForOverheads ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})(),Z=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"workflow")},cancel:e=>{}}]}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["workflow"]],features:[f.qOj],decls:1,vars:13,consts:[[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"wl-table",0),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","Workflow ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[i.a],styles:[""]}),e})();const J={},I={},Q=[{},{wrappers:["panel-wrapper"],templateOptions:{label:"Demandeur",toggleable:!0,collapsed:!0},fieldGroup:[{template:"<p>Veuillez renseigner les informations relatives au demandeur.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-7",key:"respoDemandeur",type:"input",templateOptions:{label:"Nom et Prenom du responsable du demandeur",readonly:!0}},{className:"flex-3",key:"fctionDemandeur",type:"input",templateOptions:{label:"Fonction du responsable",readonly:!0}},{className:"flex-3",key:"nomDemandeur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomDemandeur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionDemandeur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeDemandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{className:"flex-10",key:"motifDemandeur",type:"textarea",templateOptions:{label:"Motif de demande"}}]},{wrappers:["accordion-wrapper"],fieldGroup:[{templateOptions:{label:"Enregistrement de la demande d'achat"},fieldGroup:[{key:"repeatKey",type:"repeat",templateOptions:{addText:"Ajouter un article"},fieldArray:{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-4",type:"input",key:"achat",templateOptions:{label:"Libell\xe9 de l'achat",placeholder:"Nom"}},{className:"flex-1",type:"input",key:"quantite",templateOptions:{label:"Quanti\xe9",type:"number",placeholder:"Nombre",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-1",type:"input",key:"prixUnitaire",templateOptions:{label:"Prix Unitaire",type:"number",placeholder:"En cfa",change:e=>{if(null!=e.form.get("quantite").value&&null!=e.form.get("prixUnitaire").value){let t=e.form.get("quantite").value*e.form.get("prixUnitaire").value;e.form.get("montant").setValue(t)}}}},{className:"flex-3",type:"input",key:"montant",templateOptions:{type:"number",label:"Montant en cfa",placeholder:"en cfa",readonly:!0}}]}}]}]},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-2",key:"total",type:"input",templateOptions:{type:"number",label:"Total",placeholder:"en FCFA"}},{className:"flex-2",key:"totalLettre",type:"input",templateOptions:{label:"Montant total en lettre"}},{className:"flex-2",key:"dateSoumission",type:"input",templateOptions:{label:"Date de Soumission",type:"date"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(J)}}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Chef de service",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"nomValidateur",type:"input",templateOptions:{label:"Nom",readonly:!0}},{className:"flex-3",key:"prenomValidateur",type:"input",templateOptions:{label:"Prenom(s)",readonly:!0}},{className:"flex-2",key:"fonctionValidateur",type:"input",templateOptions:{label:"Fonction",readonly:!0}},{className:"flex-2",key:"matriculeValidateur",type:"input",templateOptions:{label:"Matricule",readonly:!0}},{template:"<center><p>Les informations relatives au validateur sont r\xe9cup\xe9r\xe9e \xe0 la connexion. Veuillez entrer valider ou non cette demande d'office en indiquant votre avis dans l'espace d\xe9di\xe9.</p></center>"}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("refuser").setValue("refus")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]},{wrappers:["panel-wrapper"],templateOptions:{label:"Direction Administrative et Financi\xe8re",toggleable:!0,collapsed:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"imputationBudget",type:"input",templateOptions:{label:"Imputation budgetaire",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetDispo",type:"input",templateOptions:{label:"Budget disponible",type:"number",change:e=>{if(null!=e.form.get("budgetDispo").value&&null!=e.form.get("imputationBudget").value){let t=e.form.get("budgetDispo").value-e.form.get("imputationBudget").value;e.form.get("budgetRestant").setValue(t)}if(e.form.get("imputationBudget").value>e.form.get("budgetDispo").value){let t="Le montant total exc\xe8de le budget disponible";e.form.get("budgetRestant").setValue(t)}}}},{className:"flex-3",key:"budgetRestant",type:"input",templateOptions:{label:"Budget restant",readonly:!0,placeholder:"en CFA"}},{className:"flex-1",key:"bonCaisse",type:"checkbox",templateOptions:{label:"Execution par Bon de caisse",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1},{className:"flex-1",key:"bonCommande",type:"checkbox",templateOptions:{label:"Execution par Bon de commande",change:e=>{if(!0===e.form.get("bonCaisse").value){let t=!1;e.form.get("bonCommande").setValue(t)}if(!1===e.form.get("bonCaisse").value){let t=!0;e.form.get("bonCommande").setValue(t)}if(!0===e.form.get("bonCommande").value){let t=!1;e.form.get("bonCaisse").setValue(t)}if(!1===e.form.get("bonCommande").value){let t=!0;e.form.get("bonCaisse").setValue(t)}}},defaultValue:!1}]},{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submit").setValue("soumis")}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||!l.form.valid}},{key:"refuser",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuser").setValue("refus")},expressionProperties:{"templateOptions.disabled":(e,t,l)=>"refus"===l.form.get("refuser").value||"soumis"===l.form.get("submit").value||!l.form.valid}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuser"}},{className:"flex-1",key:"resetMotif",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus"},expressionProperties:{hide:"!model.refuser"}}]}]}];let K=(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i}ngOnInit(){this.form.model=J,this.form.options=I,this.form.fields=Q,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"expense-report")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["expense-report"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","ExpenseReport ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.W,s.U,i.a],styles:[""]}),e})();var W=l(42394),X=l(91841);const $=[{path:"",component:Z,data:{title:"Workflow",breadcrumb:"Workflow"}},{path:"workflow",component:Z,data:{title:"Workflow",breadcrumb:"Workflow"}},{path:"purchase-request",component:_,data:{title:"PurchaseRequest",breadcrumb:"PurchaseRequest"}},{path:"request-for-overheads",component:Y,data:{title:"RequestForOverheads",breadcrumb:"RequestForOverheads"}},{path:"cash-receipt",component:O,data:{title:"CashReceipt",breadcrumb:"CashReceipt"}},{path:"processing-of-purchase-orders",component:G,data:{title:"ProcessingOfPurchaseOrders",breadcrumb:"ProcessingOfPurchaseOrders"}},{path:"order-sheet",component:A,data:{title:"OrderSheet",breadcrumb:"OrderSheet"}},{path:"request-for-advance-and-down-payment",component:j,data:{title:"RequestForAdvanceAndDownPayment",breadcrumb:"RequestForAdvanceAndDownPayment"}},{path:"disposal-of-vehicles",component:N,data:{title:"DisposalOfVehicles",breadcrumb:"DisposalOfVehicles"}},{path:"expense-report",component:K,data:{title:"ExpenseReport",breadcrumb:"ExpenseReport"}},{path:"checkout-form",loadChildren:()=>l.e(525).then(l.bind(l,43525)).then(e=>e.CheckoutFormModule),data:{title:"CheckoutForm",breadcrumb:"CheckoutForm"}},{path:"checkout-form-create",component:(()=>{class e extends p.K{constructor(e,t,l,a,o,i){super(e,t,l,a,o,i),this.logger=e,this.httpService=t,this.envService=l,this.messageService=a,this.authService=o,this.menuService=i,this.model={configs:[{}]},this.options={},this.fields=[{template:"<center><p>Veuillez renseigner les informations relatives au ben\xe9ficiaire de la demande.</p></center>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3",key:"code_bon_vert",type:"input",templateOptions:{label:"Numero de bon",readonly:!0}},{className:"flex-3",key:"date_demande",type:"input",templateOptions:{label:"Date",type:"date"}}]},{wrappers:["fieldset-wrapper"],templateOptions:{label:"Demandeur : "+this.user.NOM_AGENT+" "+this.user.PNOM_AGENT},fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-5",key:"fonction_responsable",type:"input",templateOptions:{label:"Fonction du demandeur",readonly:!0}},{className:"flex-5",key:"matricule_demandeur",type:"input",templateOptions:{label:"Matricule",readonly:!0,required:!0}},{className:"flex-5",key:"objet_demande",type:"select",templateOptions:{label:"Objet de la demande",options:[]}},{className:"flex-5",key:"montant_bon",type:"input",templateOptions:{label:"Valeur du bon"}},{className:"flex-10",key:"description_demande",type:"textarea",templateOptions:{label:"Description",placeholder:"Veuillez d\xe9crire le motif de votre demande"}},{}]},{template:"<br>"},{fieldGroupClassName:"d-flex flex-wrap",wrappers:["fieldset-wrapper"],templateOptions:{label:"B\xe9n\xe9ficiaire"},fieldGroup:[{className:"flex-2",key:"nom_beneficiaire",type:"input",templateOptions:{label:"Nom du b\xe9n\xe9ficiaire"}},{className:"flex-2",key:"prenom_beneficiaire",type:"input",templateOptions:{label:"Prenom du b\xe9n\xe9ficiaire"}},{className:"flex-2",key:"fonction_beneficiaire",type:"input",templateOptions:{label:"Fonction du b\xe9n\xe9ficiaire"}},{className:"flex-2",key:"matricule_beneficiaire",type:"input",templateOptions:{label:"Matricule du b\xe9n\xe9ficiaire"}},{className:"flex-10",key:"add_mandataire",type:"checkbox",templateOptions:{label:"Voulez vous attribuer un mandataire ?",click:e=>{e.form.get("add_mandataire").setValue(1)}}},{wrappers:["fieldset-wrapper"],fieldGroupClassName:"d-flex flex-wrap",hide:!0,templateOptions:{label:"Mandataire"},expressionProperties:{hide:"!model.add_mandataire"},fieldGroup:[{className:"flex-2",key:"nom_mandataire",type:"input",templateOptions:{label:"Nom du mandataire"}},{className:"flex-2",key:"prenom_mandataire",type:"input",templateOptions:{label:"Prenom du mandataire"}},{className:"flex-2",key:"fonction_mandataire",type:"input",templateOptions:{label:"fonction du mandataire"}},{className:"flex-2",key:"matricule_mandataire",type:"input",templateOptions:{label:"Matricule du mandataire"}}]},{className:"flex-8",key:"file_line",type:"file-upload",templateOptions:{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",fileType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",translate:!0,label:"Fichier justificatif de la date",handleUpload:(e,t)=>{const l=t[0],a=new FileReader;function o(t,l){return Object.keys(t).map(a=>"object"==typeof t[a]?o(t[a],a):{key:l?l+"."+a:a,value:t[a],lang_code:e.model.lang_code,status:!0})}a.readAsText(l,"UTF-8"),a.onload=function(t){const l=JSON.parse(t.target.result);console.log(l),W._.mapKeys(l,function(e,t){return{key:t,value:e}});const a=W._.flattenDeep(o(l));console.log(a),e.formControl.setValue(a),e.options.formState.enableSubmitBtn=!0},a.onerror=e=>{console.log(e)}}}}]},{template:"<br>"},{wrappers:["fieldset-wrapper"],fieldGroupClassName:"d-flex flex-wrap",templateOptions:{label:"Centre d'imputation de la demande"},fieldGroup:[{className:"flex-3",key:"centre",type:"select",templateOptions:{label:"Centre",options:[]}},{className:"flex-3",key:"activite",type:"select",templateOptions:{label:"Activit\xe9",options:[{label:"",value:"",icon:""},{label:"",value:"",icon:""},{label:"",value:"",icon:""}]}},{className:"flex-3",key:"Nature",type:"select",templateOptions:{label:"Nature",options:[{label:"",value:"",icon:""},{label:"",value:"",icon:""},{label:"",value:"",icon:""}]}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{fieldGroup:[{key:"submit",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{hide:()=>"COMPTABILITE"===this.user.profil.code}},{type:"button",templateOptions:{label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.form.get("nomDemandeur").setValue(null),e.form.get("prenomDemandeur").setValue(null),e.form.get("fonctionDemandeur").setValue(null),e.form.get("matriculeDemandeur").setValue(null)}},expressionProperties:{hide:()=>"COMPTABILITE"===this.user.profil.code}}]}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{key:"submitDAF",className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Valider demande",translate:!0,loading:!1,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)}),e.form.get("submitDAF").setValue(!0)}},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.get("refuserDAF")||!l.form.get("submitDAF")||!l.form.valid,hide:()=>"COMPTABILITE"!=this.user.profil.code}},{key:"refuserDAF",className:"flex-1",type:"button",templateOptions:{label:"Rejeter demande",bgColor:"#000",textColor:"#fff",click:e=>e.form.get("refuserDAF").setValue(!0)},expressionProperties:{"templateOptions.disabled":(e,t,l)=>!l.form.get("refuserDAF")||!l.form.get("submitDAF")||!l.form.valid,hide:()=>"COMPTABILITE"!=this.user.profil.code}},{className:"flex-10",key:"motifRejet",type:"textarea",templateOptions:{label:"Veuillez indiquer le motif de votre refus"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"submitMotif",type:"button",templateOptions:{label:"Soumettre",colorType:"primary"},expressionProperties:{hide:"!model.refuserDAF"}},{className:"flex-1",key:"annulerRefus",type:"button",templateOptions:{colorType:"primary",bgColor:"#000",textColor:"#fff",label:"Annuler r\xe9fus",click:e=>e.form.get("refuserDAF").setValue(null)},expressionProperties:{hide:"!model.refuserDAF"}}]}],this.user=this.authService.getUserInfos()}ngOnInit(){this.form.model=this.model,this.form.options=this.options,this.form.fields=this.fields,this.isSpinning=!1,console.log("this.user"),console.log(this.user),this.getDataBvert(`${W.VR}/motif/`,e=>{if(!(e instanceof X.UA)){let t=e.body.rows;t=t.map(e=>({label:null==e?void 0:e.lib_motif,value:null==e?void 0:e.code_motif})),console.log(t),this.fields[2].fieldGroup[2].templateOptions.options=t}}),this.getDataBvert(`${W.VR}/service/`,e=>{if(!(e instanceof X.UA)){let t=e.body.rows;t=t.map(e=>({label:null==e?void 0:e.lib_serv,value:null==e?void 0:e.code_serv})),console.log(t),console.log("this.fields[6]"),this.fields[6].fieldGroup[0].templateOptions.options=t}}),this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"checkout-form")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);if(t.code_bon_vert&&null!=t.code_bon_vert){const l=t.code_bon_vert;t=W._.omit(t,["code_bon_vert"]),this.putDataBvert(`${W.VR}/bonvert/${l}`,{nom_beneficiaire:e.model.nom_beneficiaire,premon_beneficiaire:e.model.premon_beneficiaire,matricule_beneficiaire:e.model.matricule_beneficiaire,fonction_beneficiaire:e.model.fonction_beneficiaire,nom_mandataire:e.model.nom_mandataire,premon_mandataire:e.model.premon_mandataire,matricule_mandataire:e.model.matricule_mandataire,fonction_mandataire:e.model.fonction_mandataire,motif:e.model.motif,montant_bon_vert:e.model.montant_bon,flag_soumis:1,flag_valid:0})}else this.getDataBvert(`${W.VR}/motif/`)}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(c.Kf),f.Y36(b.O),f.Y36(g.L),f.Y36(y.dD),f.Y36(x.e),f.Y36(h.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["checkout-form-create"]],features:[f.qOj],decls:2,vars:5,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[r.W,s.U],styles:[""]}),e})(),data:{title:"CheckoutFormCreate",breadcrumb:"CheckoutFormCreate"}}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[n.Bz.forChild($)],n.Bz]}),e})(),ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[a.ez,o.u5,o.UX,i.n,s.e,r.j,H]]}),e})()}}]);