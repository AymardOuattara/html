(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[725],{74725:function(e,t,s){"use strict";s.r(t),s.d(t,{EntityModule:function(){return v}});var a=s(38583),i=s(95987),o=s(37716);let n=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Xpm({type:e,selectors:[["entity"]],decls:2,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"p"),o._uU(1,"entity works!"),o.qZA())},styles:[""]}),e})();var l=s(88808),r=s(99688),p=s(44212),d=s(18859),c=s(52121),u=s(68058),m=s(4768),h=s(28723);let f=(()=>{class e extends r.K{constructor(e,t,s,a,i,o){super(e,t,s,a,i,o),this.logger=e,this.httpService=t,this.envService=s,this.messageService=a,this.authService=i,this.menuService=o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.Kf),o.Y36(d.O),o.Y36(c.L),o.Y36(u.dD),o.Y36(m.e),o.Y36(h.h))},e.\u0275cmp=o.Xpm({type:e,selectors:[["dashboard"]],features:[o.qOj],decls:2,vars:0,template:function(e,t){1&e&&(o.TgZ(0,"p"),o._uU(1," dashboard works "),o.qZA())},styles:[""]}),e})();var y=s(42394);const E={},T={},g=[{wrappers:["fieldset-wrapper"],templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-auto wl-hidden",key:"id",type:"input",templateOptions:{hidden:!0,translate:!0,label:"FORM_LABEL.ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,showSearch:!0,translatePlaceholder:!0,required:!0,label:"FORM_LABEL.ENTITY",placeholder:"FORM_LABEL.ENTITY",suffixIcon:"bank",options:[],valueProp:"id",labelProp:"name",url:y.T5+"/entities/load",authToken:localStorage.getItem("token")}},{className:"flex-auto",key:"key",type:"input",templateOptions:{required:!0,translate:!0,label:"FORM_LABEL.KEY"}},{className:"flex-auto",key:"value",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.VALUE",required:!0}},{className:"flex-auto",key:"description",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.DESCRIPTION"}},{className:"flex-auto",key:"family",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.FAMILY"}},{className:"flex-auto",key:"category",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.CATEGORY"}},{className:"flex-auto",key:"parent_key",type:"select",templateOptions:{translate:!0,label:"FORM_LABEL.PARAMETER_PARENT",options:[],valueProp:"id",labelProp:"key",onModelChange:e=>{}}},{className:"flex-2",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"FORM_LABEL.IS_ACTIVE"},defaultValue:!0},{className:"flex-2",key:"is_load_onstart",type:"checkbox",templateOptions:{translate:!0,label:"FORM_LABEL.IS_LOAD_ONSTART"},defaultValue:!1}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"FORM_LABEL.SUBMIT",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,s)=>!s.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(E)}}}]}]}];var A=s(91841),b=s(66782),O=s(65461),_=s(977);function L(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"nz-spin",1),o.TgZ(2,"wl-form",2),o.NdJ("onSubmit",function(t){return o.CHM(e),o.oxw().save(t)})("onModelChange",function(t){return o.CHM(e),o.oxw().modelChange(t)}),o.qZA(),o.qZA(),o.BQk()}if(2&e){const e=o.oxw();o.xp6(1),o.Q6J("nzSpinning",e.isSpinning),o.xp6(1),o.Q6J("alert",e.alert)("model",e.form.model)("fields",e.form.fields)("options",e.form.options)}}function w(e,t){if(1&e){const e=o.EpF();o.ynx(0),o.TgZ(1,"wl-table",3),o.NdJ("onLazyLoad",function(t){return o.CHM(e),o.oxw().loadData(t)}),o.qZA(),o.BQk()}if(2&e){const e=o.oxw();o.xp6(1),o.Udp("margin-top","1rem"),o.Q6J("data",e.data)("styleClass","p-datatable-gridlines p-datatable-sm")("showTools",e.hasPermissionToExport)("wrapper","panel")("legend","Liste des donn\xe9es")("columns",e.columns)("actions",e.actions)("lazy",!0)("caption","Param\xe8tres des entit\xe9s")("paginator",!0)("rows",e.rows)("totalRecords",e.totalRecords)("loading",e.loading)("globalFilterFields",e.globalFilterFields)}}let x=(()=>{class e extends r.K{constructor(e,t,s,a,i,o){super(e,t,s,a,i,o),this.logger=e,this.httpService=t,this.envService=s,this.messageService=a,this.authService=i,this.menuService=o;const n=this.authService.hasPermissionAuthorizationV2(["ENTITY_PARAMETER.CREATE","ENTITY_PARAMETER.EDIT","ENTITY_PARAMETER.CONSULT","ENTITY_PARAMETER.EXPORT","ENTITY_PARAMETER.DELETE","SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);this.hasPermissionToCreate=n[0],this.hasPermissionToEdit=n[1],this.hasPermissionToConsult=n[2],this.hasPermissionToExport=n[3],this.hasPermissionToDelete=n[4],this.hasPermissionToShowAllEntityData=n[5],this.hasPermissionToShowDataRoot=n[6]}ngOnInit(){this.form.options=T,this.form.model=this.user&&!this.user.is_root?Object.assign(Object.assign({},E),{entity_id:this.user.entity.id}):E,this.form.fields=this.user&&!this.user.is_root?this.mapFields(g,"entity_id","hide",!0):g,this.isSpinning=!1,this.columns=[{field:"entity.name",header:"Entit\xe9"},{field:"key",header:"KEY"},{field:"value",header:"VALUE"},{field:"parent_key",header:"Cle Parent"},{field:"family",header:"Famille"},{field:"category",header:"Categorie"},{field:"description",header:"Description"},{field:"status",header:"STATUS",type:"status",falseText:"Inactif",trueText:"Actif"},{field:"is_load_onstart",header:"Onstart",type:"status",falseText:"Non",trueText:"Oui"}],this.user&&this.hasPermissionToEdit&&this.actions.push({type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e),this.form.fields[0].fieldGroup[1].fieldGroup[0].templateOptions.label="SAVE"}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:e=>{this.delete(e,"entity-parameters")},cancel:e=>{}})}save(e){this.logger.log("model: ",e.model);let t=Object.assign(Object.assign({},e.model),{added_user:this.user.id});if(t.id&&null!=t.id){const e=t.id;y._.omit(t,["id"]),this.putData(`${y.T5}/entity-parameters/${e}`,t,e=>{e instanceof A.UA||this.loadData({first:0,rows:this.rows})})}else t=y._.omit(t,["id"]),this.postData(`${y.T5}/entity-parameters`,t,e=>{e instanceof A.UA||this.loadData({first:0,rows:this.rows})})}loadData(e){this.currentLoadEvent=e;const t=this.hasPermissionToShowAllEntityData?`${y.T5}/entity-parameters`:`${y.T5}/entity-parameters/byEntity/${this.user.entity.id}`;setTimeout(()=>{this.loading=!0,this.getData(`${t}/?page=${e.first/e.rows+1}&per_page=${e.rows}${null!=e.globalFilter?`&search={"sKey":"all","sValue":"${e.globalFilter}"}`:""}`,e=>{e instanceof A.UA||(this.form.fields=this.mapFields(this.form.fields,"parent_key","templateOptions.options",e.body.rows))})},1)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(p.Kf),o.Y36(d.O),o.Y36(c.L),o.Y36(u.dD),o.Y36(m.e),o.Y36(h.h))},e.\u0275cmp=o.Xpm({type:e,selectors:[["entity-parameter"]],features:[o.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","styleClass","showTools","wrapper","legend","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(o.YNc(0,L,3,5,"ng-container",0),o.YNc(1,w,2,16,"ng-container",0)),2&e&&(o.Q6J("ngIf",t.hasPermissionToCreate),o.xp6(1),o.Q6J("ngIf",t.hasPermissionToConsult))},directives:[a.O5,b.W,O.U,_.a],styles:[""]}),e})();var N=s(17524);const R=[{path:"",component:n},{path:"create",canActivate:[N.MB],component:l.G,data:{title:"MENU_LABEL.Create",breadcrumb:"MENU_LABEL.Create"}},{path:"dashboard",component:f,data:{title:"MENU_LABEL.Dashboard",breadcrumb:"MENU_LABEL.Dashboard"}},{path:"entity-parameter",canActivate:[N.fn],component:x,data:{title:"MENU_LABEL.Entity_Parameter",breadcrumb:"MENU_LABEL.Entity_Parameter"}}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.Bz.forChild(R)],i.Bz]}),e})();var M=s(3679),S=s(84828);let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[a.ez,M.u5,k,O.e,_.n,b.j,S.we]]}),e})()}}]);