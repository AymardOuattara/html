!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),n)}var o,a}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var o=c(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[567],{37567:function(t,n,r){"use strict";r.r(n),r.d(n,{CreateItemModule:function(){return F}});var s=r(38583),c=r(3679),u=r(977),d=r(65461),p=r(66782),f=r(98542),m=r(95987),h=r(99688),g=r(37716),b=r(44212),y=r(18859),v=r(52121),T=r(68058),O=r(4768),S=r(28723),w=function(){var e=function(e){a(n,e);var t=l(n);function n(e,o,a,r,l,s){var c;return i(this,n),(c=t.call(this,e,o,a,r,l,s)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=l,c.menuService=s,c}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.form.model=Object.assign({},t)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:function(t){e.delete(t,"create-item")},cancel:function(e){}}]}},{key:"save",value:function(e){this.logger.log("model: ",e.model);var t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}},{key:"loadData",value:function(e){var t=this;console.log(e),setTimeout(function(){t.loading=!0},1e3)}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(g.Y36(b.Kf),g.Y36(y.O),g.Y36(v.L),g.Y36(T.dD),g.Y36(O.e),g.Y36(S.h))},e.\u0275cmp=g.Xpm({type:e,selectors:[["create-item"]],features:[g.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(g.TgZ(0,"nz-spin",0),g.TgZ(1,"wl-form",1),g.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),g.qZA(),g.qZA(),g.TgZ(2,"wl-table",2),g.NdJ("onLazyLoad",function(e){return t.loadData(e)}),g.qZA()),2&e&&(g.Q6J("nzSpinning",t.isSpinning),g.xp6(1),g.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),g.xp6(1),g.Udp("margin-top","1rem"),g.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","CreateItem ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[p.W,d.U,u.a],styles:[""]}),e}(),x=r(42394),A=r(91841),C={},k={},E=[{template:"<p>Vous pouvez ajouter des services \xe0 votre organisation.</p>"},{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3 wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-3",key:"name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"}},{className:"flex-3",key:"surname",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Prenoms",placeholder:"Prenoms",suffixIcon:"user"}},{className:"flex-3",key:"matricule",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Matricule",placeholder:"Matricule",suffixIcon:"number"}},{className:"flex-3",key:"service_id",type:"select",templateOptions:{translate:!0,required:!0,translatePlaceholder:!0,label:"Service",placeholder:"Service",suffixIcon:"container",options:[],valueProp:"id",labelProp:"libelle"}},{className:"flex-3",key:"telephone",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Telephone",placeholder:"Telephone",suffixIcon:"phone"}},{className:"flex-3",key:"portable",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Portable",placeholder:"Portable",suffixIcon:"phone"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail",pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/},validation:{messages:{pattern:function(e,t){return'"'.concat(t.formControl.value,"\" n'est pas une adresse email valide")}}}},{className:"flex-3",key:"adresse",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Adresse",placeholder:"Adresse",suffixIcon:"number"}},,{className:"flex-3",key:"lieu_naissance",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Lieu de Naissance",placeholder:"Lieu de Naissance",suffixIcon:"aim"}},{className:"flex-6",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(C)}}}]}]}];function _(e,t){if(1&e){var i=g.EpF();g.TgZ(0,"wl-form",7),g.NdJ("onSubmit",function(e){return g.CHM(i),g.oxw().save(e)})("onModelChange",function(e){return g.CHM(i),g.oxw().modelChange(e)}),g.qZA()}if(2&e){var n=g.oxw();g.Q6J("alert",n.alert)("model",n.form.model)("fields",n.form.fields)("options",n.form.options)}}var z,j,D=r(23815),P=function(){var t=function(t){a(r,t);var n=l(r);function r(e,t,o,a,l,s,c,u){var d;i(this,r),(d=n.call(this,e,t,o,a,l,s,c)).logger=e,d.httpService=t,d.envService=o,d.messageService=a,d.authService=l,d.menuService=s,d.modal=c,d.changeDetectorRef=u,d.isEditMode=!1,d.isVisible=!1;var p=d.authService.hasPermissionAuthorizationV2(["USER_LIST.CREATE","USER_LIST.LOCK","USER_LIST.EDIT","USER_LIST.UNLOCK","USER_LIST.EXPORT","USER_LIST.DELETE","SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);return d.hasPermissionToLock=p[1],d.hasPermissionToEdit=p[2],d.hasPermissionToUnlock=p[3],d.hasPermissionToExport=p[4],d.hasPermissionToDelete=p[5],d.hasPermissionToShowAllEntityData=p[6],d.hasPermissionToShowDataRoot=p[7],d.hasPermissionToCreate=p[0],d}return o(r,[{key:"maFonction",value:function(){this.form.fields[0].template="<p>Veuillez remplir ce formulaire pour cr\xe9er un agent.</p>",this.isVisible=!0,this.isEditMode=!1}},{key:"modalTitle",get:function(){return this.isEditMode?"Mise \xe0 jour":"Ajouter"}},{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){var e=this;this.loadAllService(),this.form.model=Object.assign({},C),this.form.fields=E,this.form.options=k,this.globalFilterFields=["name","surname","matricule","email","adresse"],this.columns=[{field:"service.libelle",header:"Service"},{field:"name",header:"Nom"},{field:"surname",header:"Prenom(s)"},{field:"matricule",header:"Matricule"},{field:"email",header:"Email"},{field:"adresse",header:"Adresse"},{field:"status",header:"Status",type:"status",falseText:"Inactif",trueText:"Actif"},{field:"created_at",header:"Created_at",type:"date"}],this.user&&this.hasPermissionToEdit&&this.actions.push({type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.logger.log(t),e.isEditMode=!0,e.isVisible=!0,console.log(t),e.form.fields[0].template="<p>Veuillez renseigner ce formulaire pour modifier les informations dudit agent.</p>",setTimeout(function(){e.alert=void 0,t.status=0!=t.status,e.form.model=Object.assign({},t),e.form.fields[0].fieldGroup[0].template="<h5>Vous modifiez de l'utilisateur <i>".concat(t.login,"</i> </h5>"),e.form.fields[0].fieldGroup[1].fieldGroup[0].templateOptions.label="Enregistrer",e.changeDetectorRef.detectChanges()},1)}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"warning",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.swingstatus(t)},cancel:function(e){}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.delete(t,"agent")},cancel:function(e){}})}},{key:"save",value:function(e){var t=this;if(console.log(e),1==this.isEditMode){this.changeDetectorRef.detectChanges(),this.logger.log("event.model: ",e.model);var i=Object.assign(Object.assign({},e.model),{phone:e.model.prefix+" "+e.model.phone,session:this.user.session_id});this.logger.log("payload ",i);var n=i.id;i=D.omit(i,["id"]),i=Object.assign(Object.assign({},i),{updated_user:this.user.id}),this.putData("".concat(x.T5,"/agent/").concat(n),i,function(e){e instanceof A.UA||(t.loadData(t.currentLoadEvent),t.isVisible=!1)})}else{var o=Object.assign(Object.assign({},e.model),{code:e.model.code,libelle:e.model.libelle,session:this.user.session_id});console.log(o),this.logger.log("payload ",o),o.id&&null!=o.id?(o=Object.assign(Object.assign({},o),{added_user:this.user.id}),this.postData("".concat(x.T5,"/agent"),o,function(e){e instanceof A.UA||t.loadData(t.currentLoadEvent)})):(console.log(o),o=D.omit(o,["id"]),o=Object.assign(Object.assign({},o),{added_user:this.user.id}),this.postData("".concat(x.T5,"/agent"),o,function(e){e instanceof A.UA||(t.loadData(t.currentLoadEvent),t.isVisible=!1)}))}}},{key:"swingstatus",value:function(e){var t=this,i=e.id,n=e.status;if(1==n){var o=D.omit(e,["id"]);o={status:!1,updated_user:this.user.id},this.putData("".concat(x.T5,"/agent/").concat(i),o,function(e){e instanceof A.UA||t.loadData(t.currentLoadEvent)})}if(0==n){var a=D.omit(e,["id"]);a={status:!0,updated_user:this.user.id},this.putData("".concat(x.T5,"/agent/").concat(i),a,function(e){e instanceof A.UA||t.loadData(t.currentLoadEvent)})}}},{key:"loadData",value:function(e){var t=this;this.currentLoadEvent=e;var i=null!=e.globalFilter?'&search={"sKey":"all","sValue":"'.concat(e.globalFilter,'"}'):"";setTimeout(function(){t.loading=!0,t.getData("".concat(x.T5,"/agent/?page=").concat(e.first/e.rows+1,"&per_page=").concat(e.rows).concat(i))},1)}},{key:"loadAllService",value:function(){var t=this,i=(this.authService.hasPermissionAuthorization("SHOW_DATA.ALL_ENTITY"),"".concat(x.T5,"/service/"));this.httpService.getData("".concat(i)).toPromise().then(function(i){t.isSpinning=!1;var n=i.body.rows;t.notAllPrivilege&&n.push.apply(n,e(t.user.entities)),t.form.fields=t.mapFields(t.form.fields,"service_id","templateOptions.options",n)}).catch(function(e){t.logger.error(e)})}},{key:"handleCancel",value:function(){this.isVisible=!1}}]),r}(h.K);return t.\u0275fac=function(e){return new(e||t)(g.Y36(b.Kf),g.Y36(y.O),g.Y36(v.L),g.Y36(T.dD),g.Y36(O.e),g.Y36(S.h),g.Y36(f.Sf),g.Y36(g.sBO))},t.\u0275cmp=g.Xpm({type:t,selectors:[["create-item-dilicom"]],features:[g.qOj],decls:11,vars:18,consts:[["nzWidth","920px",3,"nzVisible","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],[3,"alert","model","fields","options","onSubmit","onModelChange",4,"nzModalContent"],[2,"width","100%","text-align","center"],[2,"border","3px dashed whitesmoke","padding","400px"],[2,"font-size","small"],[1,"button-19",2,"margin-left","20px",3,"click"],[3,"data","styleClass","showTools","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(g.TgZ(0,"nz-modal",0),g.NdJ("nzVisibleChange",function(e){return t.isVisible=e})("nzOnCancel",function(){return t.handleCancel()}),g.YNc(1,_,1,4,"wl-form",1),g.qZA(),g._UZ(2,"br"),g.TgZ(3,"table",2),g.TgZ(4,"tr",3),g.TgZ(5,"td"),g.TgZ(6,"h5",4),g._uU(7," Ajouter un article en cliquant sur ce bouton "),g.TgZ(8,"button",5),g.NdJ("click",function(){return t.maFonction()}),g._uU(9,"Ajouter"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(10,"wl-table",6),g.NdJ("onLazyLoad",function(e){return t.loadData(e)}),g.qZA()),2&e&&(g.Q6J("nzVisible",t.isVisible)("nzTitle",t.modalTitle)("nzFooter",null),g.xp6(10),g.Udp("margin-top","1rem"),g.Q6J("data",t.data)("styleClass","p-datatable-gridlines p-datatable-sm")("showTools",t.hasPermissionToExport)("columns",t.columns)("showTools",!0)("actions",t.actions)("lazy",!0)("caption","Departements")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[f.du,f.Hf,u.a,d.U],styles:[".search-input .inline{display:inline-block;margin:0!important;padding:0!important}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child button{border-radius:0 0 10px 0}  .search-input .inline:last-child{position:relative;top:1.8rem;left:-1.5px;margin:0;padding:0}  .search-input .inline:last-child nz-input-group{border-radius:0 .2rem .2rem 0!important}  .button-19{background:#0d6d3a;border:1px solid #0d6d3a;border-radius:6px;box-shadow:1px 2px 4px rgba(0,0,0,.1);box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:nunito,roboto,proxima-nova,proxima nova,sans-serif;font-size:13px;font-weight:800;line-height:16px;min-height:40px;outline:0;padding:12px 14px;text-align:center;text-rendering:geometricprecision;text-transform:none;-moz-user-select:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:middle}  .button-19:active,   .button-19:hover{background-color:transparent;background-color:initial;background-position:0 0;color:#0d6d3a}"]}),t}(),I=[{path:"",component:w,data:{title:"CreateItem",breadcrumb:"CreateItem"}},{path:"create-item",component:w,data:{title:"CreateItem",breadcrumb:"CreateItem"}},{path:"create-item-manuel",component:(z=function(e){a(n,e);var t=l(n);function n(e,o,a,r,l,s){var c;return i(this,n),(c=t.call(this,e,o,a,r,l,s)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=l,c.menuService=s,c}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.form.model=Object.assign({},t)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:function(t){e.delete(t,"create-item-manuel")},cancel:function(e){}}]}},{key:"save",value:function(e){this.logger.log("model: ",e.model);var t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}},{key:"loadData",value:function(e){var t=this;console.log(e),setTimeout(function(){t.loading=!0},1e3)}}]),n}(h.K),z.\u0275fac=function(e){return new(e||z)(g.Y36(b.Kf),g.Y36(y.O),g.Y36(v.L),g.Y36(T.dD),g.Y36(O.e),g.Y36(S.h))},z.\u0275cmp=g.Xpm({type:z,selectors:[["create-item-manuel"]],features:[g.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(g.TgZ(0,"nz-spin",0),g.TgZ(1,"wl-form",1),g.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),g.qZA(),g.qZA(),g.TgZ(2,"wl-table",2),g.NdJ("onLazyLoad",function(e){return t.loadData(e)}),g.qZA()),2&e&&(g.Q6J("nzSpinning",t.isSpinning),g.xp6(1),g.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),g.xp6(1),g.Udp("margin-top","1rem"),g.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","CreateItemManuel ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[p.W,d.U,u.a],styles:[""]}),z),data:{title:"CreateItemManuel",breadcrumb:"CreateItemManuel"}},{path:"create-item-dilicom",component:P,data:{title:"CreateItemDilicom",breadcrumb:"CreateItemDilicom"}}],L=function(){var e=o(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[m.Bz.forChild(I)],m.Bz]}),e}(),F=((j=o(function e(){i(this,e)})).\u0275fac=function(e){return new(e||j)},j.\u0275mod=g.oAB({type:j}),j.\u0275inj=g.cJS({imports:[[s.ez,c.u5,c.UX,u.n,d.e,f.Qp,p.j,L]]}),j)}}])}();