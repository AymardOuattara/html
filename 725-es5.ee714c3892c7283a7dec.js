!function(){function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&t(e,n)}function t(e,n){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,n)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,(o=a.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),a)}var o,i}function s(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[725],{74725:function(t,a,o){"use strict";o.r(a),o.d(a,{EntityModule:function(){return I}});var r=o(38583),l=o(95987),c=o(37716),u=function(){var e=function(){function e(){i(this,e)}return s(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["entity"]],decls:2,vars:0,template:function(e,t){1&e&&(c.TgZ(0,"p"),c._uU(1,"entity works!"),c.qZA())},styles:[""]}),e}(),p=o(88808),f=o(99688),d=o(44212),m=o(18859),y=o(52121),h=o(68058),b=o(4768),g=o(28723),E=function(){var t=function(t){e(o,t);var a=n(o);function o(e,t,n,r,s,l){var c;return i(this,o),(c=a.call(this,e,t,n,r,s,l)).logger=e,c.httpService=t,c.envService=n,c.messageService=r,c.authService=s,c.menuService=l,c}return s(o,[{key:"ngOnInit",value:function(){}}]),o}(f.K);return t.\u0275fac=function(e){return new(e||t)(c.Y36(d.Kf),c.Y36(m.O),c.Y36(y.L),c.Y36(h.dD),c.Y36(b.e),c.Y36(g.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["dashboard"]],features:[c.qOj],decls:2,vars:0,template:function(e,t){1&e&&(c.TgZ(0,"p"),c._uU(1," dashboard works "),c.qZA())},styles:[""]}),t}(),T=o(42394),v={},O={},A=[{wrappers:["fieldset-wrapper"],templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-auto wl-hidden",key:"id",type:"input",templateOptions:{hidden:!0,translate:!0,label:"FORM_LABEL.ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,showSearch:!0,translatePlaceholder:!0,required:!0,label:"FORM_LABEL.ENTITY",placeholder:"FORM_LABEL.ENTITY",suffixIcon:"bank",options:[],valueProp:"id",labelProp:"name",url:T.T5+"/entities/load",authToken:localStorage.getItem("token")}},{className:"flex-auto",key:"key",type:"input",templateOptions:{required:!0,translate:!0,label:"FORM_LABEL.KEY"}},{className:"flex-auto",key:"value",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.VALUE",required:!0}},{className:"flex-auto",key:"description",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.DESCRIPTION"}},{className:"flex-auto",key:"family",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.FAMILY"}},{className:"flex-auto",key:"category",type:"input",templateOptions:{translate:!0,label:"FORM_LABEL.CATEGORY"}},{className:"flex-auto",key:"parent_key",type:"select",templateOptions:{translate:!0,label:"FORM_LABEL.PARAMETER_PARENT",options:[],valueProp:"id",labelProp:"key",onModelChange:function(e){}}},{className:"flex-2",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"FORM_LABEL.IS_ACTIVE"},defaultValue:!0},{className:"flex-2",key:"is_load_onstart",type:"checkbox",templateOptions:{translate:!0,label:"FORM_LABEL.IS_LOAD_ONSTART"},defaultValue:!1}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"FORM_LABEL.SUBMIT",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){console.log("clik on submit"),e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,n){return!n.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(v)}}}]}]}],_=o(91841),w=o(66782),L=o(65461),P=o(977);function R(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"nz-spin",1),c.TgZ(2,"wl-form",2),c.NdJ("onSubmit",function(e){return c.CHM(n),c.oxw().save(e)})("onModelChange",function(e){return c.CHM(n),c.oxw().modelChange(e)}),c.qZA(),c.qZA(),c.BQk()}if(2&e){var a=c.oxw();c.xp6(1),c.Q6J("nzSpinning",a.isSpinning),c.xp6(1),c.Q6J("alert",a.alert)("model",a.form.model)("fields",a.form.fields)("options",a.form.options)}}function k(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"wl-table",3),c.NdJ("onLazyLoad",function(e){return c.CHM(n),c.oxw().loadData(e)}),c.qZA(),c.BQk()}if(2&e){var a=c.oxw();c.xp6(1),c.Udp("margin-top","1rem"),c.Q6J("data",a.data)("styleClass","p-datatable-gridlines p-datatable-sm")("showTools",a.hasPermissionToExport)("wrapper","panel")("legend","Liste des donn\xe9es")("columns",a.columns)("actions",a.actions)("lazy",!0)("caption","Param\xe8tres des entit\xe9s")("paginator",!0)("rows",a.rows)("totalRecords",a.totalRecords)("loading",a.loading)("globalFilterFields",a.globalFilterFields)}}var x,S=function(){var t=function(t){e(o,t);var a=n(o);function o(e,t,n,r,s,l){var c;i(this,o),(c=a.call(this,e,t,n,r,s,l)).logger=e,c.httpService=t,c.envService=n,c.messageService=r,c.authService=s,c.menuService=l;var u=c.authService.hasPermissionAuthorizationV2(["ENTITY_PARAMETER.CREATE","ENTITY_PARAMETER.EDIT","ENTITY_PARAMETER.CONSULT","ENTITY_PARAMETER.EXPORT","ENTITY_PARAMETER.DELETE","SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);return c.hasPermissionToCreate=u[0],c.hasPermissionToEdit=u[1],c.hasPermissionToConsult=u[2],c.hasPermissionToExport=u[3],c.hasPermissionToDelete=u[4],c.hasPermissionToShowAllEntityData=u[5],c.hasPermissionToShowDataRoot=u[6],c}return s(o,[{key:"ngOnInit",value:function(){var e=this;this.form.options=O,this.form.model=this.user&&!this.user.is_root?Object.assign(Object.assign({},v),{entity_id:this.user.entity.id}):v,this.form.fields=this.user&&!this.user.is_root?this.mapFields(A,"entity_id","hide",!0):A,this.isSpinning=!1,this.columns=[{field:"entity.name",header:"Entit\xe9"},{field:"key",header:"KEY"},{field:"value",header:"VALUE"},{field:"parent_key",header:"Cle Parent"},{field:"family",header:"Famille"},{field:"category",header:"Categorie"},{field:"description",header:"Description"},{field:"status",header:"STATUS",type:"status",falseText:"Inactif",trueText:"Actif"},{field:"is_load_onstart",header:"Onstart",type:"status",falseText:"Non",trueText:"Oui"}],this.user&&this.hasPermissionToEdit&&this.actions.push({type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.form.model=Object.assign({},t),e.form.fields[0].fieldGroup[1].fieldGroup[0].templateOptions.label="SAVE"}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.delete(t,"entity-parameters")},cancel:function(e){}})}},{key:"save",value:function(e){var t=this;this.logger.log("model: ",e.model);var n=Object.assign(Object.assign({},e.model),{added_user:this.user.id});if(n.id&&null!=n.id){var a=n.id;T._.omit(n,["id"]),this.putData("".concat(T.T5,"/entity-parameters/").concat(a),n,function(e){e instanceof _.UA||t.loadData({first:0,rows:t.rows})})}else n=T._.omit(n,["id"]),this.postData("".concat(T.T5,"/entity-parameters"),n,function(e){e instanceof _.UA||t.loadData({first:0,rows:t.rows})})}},{key:"loadData",value:function(e){var t=this;this.currentLoadEvent=e;var n=this.hasPermissionToShowAllEntityData?"".concat(T.T5,"/entity-parameters"):"".concat(T.T5,"/entity-parameters/byEntity/").concat(this.user.entity.id);setTimeout(function(){t.loading=!0,t.getData("".concat(n,"/?page=").concat(e.first/e.rows+1,"&per_page=").concat(e.rows).concat(null!=e.globalFilter?'&search={"sKey":"all","sValue":"'.concat(e.globalFilter,'"}'):""),function(e){e instanceof _.UA||(t.form.fields=t.mapFields(t.form.fields,"parent_key","templateOptions.options",e.body.rows))})},1)}}]),o}(f.K);return t.\u0275fac=function(e){return new(e||t)(c.Y36(d.Kf),c.Y36(m.O),c.Y36(y.L),c.Y36(h.dD),c.Y36(b.e),c.Y36(g.h))},t.\u0275cmp=c.Xpm({type:t,selectors:[["entity-parameter"]],features:[c.qOj],decls:2,vars:2,consts:[[4,"ngIf"],["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","styleClass","showTools","wrapper","legend","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(c.YNc(0,R,3,5,"ng-container",0),c.YNc(1,k,2,16,"ng-container",0)),2&e&&(c.Q6J("ngIf",t.hasPermissionToCreate),c.xp6(1),c.Q6J("ngIf",t.hasPermissionToConsult))},directives:[r.O5,w.W,L.U,P.a],styles:[""]}),t}(),N=o(17524),M=[{path:"",component:u},{path:"create",canActivate:[N.MB],component:p.G,data:{title:"MENU_LABEL.Create",breadcrumb:"MENU_LABEL.Create"}},{path:"dashboard",component:E,data:{title:"MENU_LABEL.Dashboard",breadcrumb:"MENU_LABEL.Dashboard"}},{path:"entity-parameter",canActivate:[N.fn],component:S,data:{title:"MENU_LABEL.Entity_Parameter",breadcrumb:"MENU_LABEL.Entity_Parameter"}}],C=function(){var e=s(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[l.Bz.forChild(M)],l.Bz]}),e}(),B=o(3679),F=o(84828),I=((x=s(function e(){i(this,e)})).\u0275fac=function(e){return new(e||x)},x.\u0275mod=c.oAB({type:x}),x.\u0275inj=c.cJS({imports:[[r.ez,B.u5,C,L.e,P.n,w.j,F.we]]}),x)}}])}();