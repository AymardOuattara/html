(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[906],{4906:function(e,t,i){"use strict";i.r(t),i.d(t,{UsersManagementModule:function(){return te}});var s=i(38583),a=i(65461),o=i(977),l=i(66782),r=i(98542),n=i(24020),d=i(95987),p=i(99688);const c={},m={},u=[{template:"<p>Vous pouvez ajouter des permissions \xe0 un utilisateur en selectionnant les permissions que vous voulez lui attribuer.</p>"},{fieldGroupClassName:"d-flex flex-wrap flex-start",fieldGroup:[{className:"flex-5",key:"user_id",type:"select",templateOptions:{required:!0,translate:!0,label:"Utilisateur",options:[],valueProp:"id",labelProp:"login",onModelChange:(e,t)=>{console.log(t,e);const i=e.templateOptions.options.find(e=>e.id==t);i&&(e.parent.fieldGroup[1].templateOptions.options=e.parent.fieldGroup[1].templateOptions.options.map(e=>i.permissions.map(e=>e.id).includes(e.id)?Object.assign(Object.assign({},e),{direction:"right"}):Object.assign(Object.assign({},e),{direction:"left"})),e.form.get("permission_id").setValue(i.permission))}}},{className:"flex-10",key:"permission_id",type:"transfert",templateOptions:{translate:!0,required:!0,right:"Attribuer",left:"Retirer",showCode:!0,label:"Permissions",change:(e,t)=>{const i=e.templateOptions.options.filter(e=>"right"==e.direction);e.formControl.setValue(i)}}},{className:"flex-1",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!1}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,i)=>!i.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(c)}}}]}];var h=i(42394),f=i(37716),g=i(44212),b=i(18859),y=i(52121),v=i(68058),T=i(4768),O=i(28723);let x=(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o;const l=this.authService.hasPermissionAuthorizationV2(["SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);this.hasPermissionToShowAllEntityData=l[0],this.hasPermissionToShowDataRoot=l[1]}ngOnInit(){this.form.model=c,this.form.fields=u,this.form.options=m,this.loadAllUserPermission(),this.loadAllPermission()}save(e){var t;this.logger.log("model: ",e.model);const i=(null===(t=e.model.permission_id)||void 0===t?void 0:t.length)?e.model.permission_id.map(t=>({user_id:e.model.user_id,permission_id:t.id,status:e.model.status,added_user:this.user.id})):[{user_id:e.model.user_id,permission_id:void 0,status:e.model.status,added_user:this.user.id}];this.logger.log("save user-profil ==> ",i),this.httpService.postData(`${h.T5}/user-permissions`,i).subscribe(e=>{this.logger.log("postData response ===> ",e),this.loadAllUserPermission(),this.setMessage("success","Enregistrement effectu\xe9 avec succ\xe8s !"),setTimeout(()=>{this.form.options.resetModel()},1e3)},e=>{if(this.logger.log("postData error ===> ",e),this.setBackendError(e.error),e.error.errors){let t="";e.error.errors.forEach(e=>{t+=e.msg+" "+e.param+"\n"}),this.alert={type:"error",message:e.error.message,description:t}}},()=>{})}loadAllPermission(){this.httpService.getData(this.hasPermissionToShowAllEntityData?`${h.T5}/permissions`:`${h.T5}/permissions/byEntityAdded/${this.user.entity.id}`).toPromise().then(e=>{this.form.fields=this.mapFields(this.form.fields,"permission_id","templateOptions.options",e.body.rows)}).catch(e=>{this.logger.error(e)})}loadAllUserPermission(){this.httpService.getData(this.hasPermissionToShowAllEntityData?`${h.T5}/user-permissions/deep`:`${h.T5}/user-permissions/byEntity/deep/${this.user.entity.id}`).toPromise().then(e=>{this.isSpinning=!1;let t=e.body.rows;this.hasPermissionToShowDataRoot||(t=t.filter(e=>!e.is_root)),this.form.fields=this.mapFields(this.form.fields,"user_id","templateOptions.options",t)}).catch(e=>{this.logger.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["user-permission"]],features:[f.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[l.W,a.U],styles:["[_nghost-%COMP%]{background:#fff;padding:10px!important;display:block}"]}),e})();const S={},A={},_=[{template:"<p>Vous pouvez attribuer un r\xf4le \xe0 un utilisateur en selectionnant le r\xf4le apr\xe8s avoir selectionn\xe9 l'utilisateur.</p>"},{fieldGroupClassName:"d-flex flex-wrap flex-start",fieldGroup:[{className:"flex-6",key:"user_id",type:"list-box",templateOptions:{required:!0,translate:!0,label:"Utilisateurs",options:[],divider:"right",dividerText:"Selectionnez le r\xf4le \xe0 attribuer",checkbox:!1,multiple:!1,valueProp:"id",labelProp:"login",onChange:(e,t)=>{var i;e.form.get("profile_id").setValue(null===(i=e.templateOptions.options.find(e=>e.id==t.value))||void 0===i?void 0:i.profiles.map(e=>e.id))}}},{className:"flex-4",key:"profile_id",type:"list-box",templateOptions:{translate:!0,label:"R\xf4les",options:[],valueProp:"id",onChange:e=>{}}},{className:"flex-1",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,i)=>!i.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(S)}}}]}];var Z=i(50249);let P=(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o;const l=this.authService.hasPermissionAuthorizationV2(["SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);this.hasPermissionToShowAllEntityData=l[0],this.hasPermissionToShowDataRoot=l[1]}ngOnInit(){this.form.fields=_,this.form.model=S,this.form.options=A,this.loadAllProfil(),this.loadAllUser()}save(e){var t;this.logger.log("model: ",e.model);const i=(null===(t=e.model.profile_id)||void 0===t?void 0:t.length)?e.model.profile_id.map(t=>({user_id:e.model.user_id,profile_id:t,status:e.model.status||!0,added_user:this.user.id})):[{user_id:e.model.user_id,profile_id:void 0,status:e.model.status||!0,added_user:this.user.id}];this.logger.log("save user-profil ==> ",i),this.httpService.postData(`${h.T5}/user-profiles`,i).subscribe(e=>{this.logger.log("postData response ===> ",e),this.loadAllUser(),this.setMessage("success","Enregistrement effectu\xe9 avec succ\xe8s !"),setTimeout(()=>{this.form.model={},this.form.options.resetModel()},1e3)},e=>{this.logger.log("postData error ===> ",e),this.setBackendError(e.error);let t="";e.error.errors&&e.error.errors.forEach(e=>{t+=e.msg+" "+e.param+"\n"}),this.alert={type:"error",message:e.error.message,description:t}},()=>{})}loadAllProfil(){this.httpService.getData(this.hasPermissionToShowAllEntityData?`${h.T5}/profiles/`:`${h.T5}/profiles/byEntity/${this.user.entity.id}`).toPromise().then(e=>{let t=e.body.rows;this.hasPermissionToShowDataRoot||(t=t.filter(e=>"PROF_ROOT"!=e.code)),this.form.fields=this.mapFields(this.form.fields,"profile_id","templateOptions.options",t)}).catch(e=>{this.logger.error(e)})}loadAllUser(){this.httpService.getData(this.hasPermissionToShowAllEntityData?`${h.T5}/user-profiles/deep`:`${h.T5}/user-profiles/byEntity/deep/${this.user.entity.id}`).toPromise().then(e=>{console.log(e),this.isSpinning=!1;let t=e.body.rows;this.hasPermissionToShowDataRoot||(t=t.filter(e=>!e.is_root&&!e.profiles.map(e=>e.code).includes("PROF_ROOT"))),this.form.fields=this.mapFields(this.form.fields,"user_id","templateOptions.options",t)}).catch(e=>{this.logger.error(e)})}loadFields(){this.httpService.get("assets/data/form-schema.json").toPromise().then(e=>{console.log("load actions ==>",e),this.form.fields=(0,Z.q3)(JSON.stringify(e.body)),this.loadAllProfil(),this.loadAllUser()}).catch(e=>{this.logger.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["user-profil"]],features:[f.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[l.W,a.U],styles:["[_nghost-%COMP%]{background:#fff;padding:10px!important;display:block}"]}),e})();const z={entity_type_id:2},C={},k=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3 wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,required:!0,translatePlaceholder:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"user",options:[],valueProp:"id",labelProp:"name"},hideExpression:"model.id"},{className:"flex-3",key:"code",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,label:"Matricule",placeholder:"Matricule"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"}},{className:"flex-3",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail",pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/},validation:{messages:{pattern:(e,t)=>`"${t.formControl.value}" n'est pas une adresse email valide`}}},{className:"flex-3",fieldGroupClassName:"d-flex search-input",fieldGroup:[{className:"inline flex-3",key:"prefix",type:"select",templateOptions:{translate:!0,showSearch:!0,label:"Telephone",labelProp:"phone_prefix",valueProp:"phone_prefix",options:[]},expressionProperties:{"templateOptions.required":"model.phone"},defaultValue:"+225"},{className:"inline flex-7",key:"phone",type:"input",templateOptions:{suffixIcon:"phone",type:"number",minLength:6,maxLength:10},validation:{messages:{pattern:(e,t)=>`Le num\xe9ro ${t.formControl.value} n'est pas valide`}},validators:{validation:[class{static maxLength(e){return t=>t.value?(t.value.length>e&&t.setValue(t.value.substring(0,e)),null):null}}.maxLength(10)]}}]},{className:"flex-3",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,autocomplete:!1}},{className:"flex-3",key:"password",type:"input",templateOptions:{type:"password",translate:!0,required:!0,translatePlaceholder:!0,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$",label:"Mot de passe",placeholder:"Mot de passe"},validation:{messages:{pattern:(e,t)=>"Le mot de passe doit contenir au moins 8 caract\xe8res, 1 caract\xe8re special, 1 nombre, 1 majuscule et une minuscule"}}},{className:"flex-1",key:"is_root",type:"checkbox",templateOptions:{translate:!0,label:"Est root ?"},defaultValue:!1},{className:"flex-3",key:"is_admin",type:"checkbox",templateOptions:{translate:!0,label:"Est admin ?"},defaultValue:!0},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{console.log(),e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,i)=>!i.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(z)}}}]}]}],w=i(23815);let q=(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o}ngOnInit(){this.form.model=this.notAllPrivilege?Object.assign(Object.assign({},z),{entity_id:this.user.entity.id}):z,this.notAllPrivilege?(this.form.fields=this.mapFields(k,"entity_id","hide",!0),this.form.fields=this.mapFields(this.form.fields,"is_root","hide",!0)):this.form.fields=k,this.form.options=C,this.loadAllEntity(),this.loadCountries(),this.isSpinning=!1}save(e){let t=Object.assign(Object.assign({},e.model),{matricule:e.model.code,phone:e.model.prefix+""+e.model.phone,session:this.user.session_id});console.log(t),this.logger.log("payload ",t),t.id&&null!=t.id||(t=w.omit(t,["id"]),t=Object.assign(Object.assign({},t),{added_user:this.user.id}),this.postData(`${h.T5}/users`,t))}loadAllEntity(){const e=this.authService.hasPermissionAuthorization("SHOW_DATA.ALL_ENTITY")?`${h.T5}/entities/`:`${h.T5}/entities/byUserEntityAdded/${this.user.entity.id}`;this.httpService.getData(`${e}`).toPromise().then(e=>{this.isSpinning=!1;let t=e.body.rows;this.notAllPrivilege&&t.push(...this.user.entities),this.form.fields=this.mapFields(this.form.fields,"entity_id","templateOptions.options",t)}).catch(e=>{this.logger.error(e)})}loadCountries(){this.httpService.getData(`${h.T5}/countries`).toPromise().then(e=>{let t=e.body.rows;this.isSpinning=!1,this.form.fields=this.mapFields(this.form.fields,"prefix","templateOptions.options",t)}).catch(e=>{this.logger.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["create"]],features:[f.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[l.W,a.U],styles:[".search-input .inline{display:inline-block;margin:0!important;padding:0!important}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child button{border-radius:0 0 10px 0}  .search-input .inline:last-child{position:relative;top:1.8rem;left:-1.5px;margin:0;padding:0}  .search-input .inline:last-child nz-input-group{border-radius:0 .2rem .2rem 0!important}"]}),e})();const N={},E={formState:{showError:!1}},D=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{template:"<h4>Synchroniser un utilisateur existant</h4><p>Veuillez effectuer une recherche \xe0 partir du login de l'utilisateur que vous souhaitez synchroniser.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{key:"action",type:"input",hide:!0},{className:"flex-auto wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-4",fieldGroupClassName:"d-flex flex-wrap search-input",fieldGroup:[{className:"inline",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,change:(e,t)=>{console.log(e.model.login)}},validation:{show:!0}},{className:"inline",type:"button",templateOptions:{type:"submit",icon:"search",loading:!1,disabled:!0,click:e=>{e.model.action="searchSSO",e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":"!model.login"}}]},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"bank",options:[],valueProp:"id",labelProp:"name",url:h.T5+"/entities/load"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-4",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"},expressionProperties:{"templateOptions.hidden":"!model.last_name"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail"},expressionProperties:{"templateOptions.hidden":"!model.email"}},{className:"flex-3",key:"phone",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Telephone",placeholder:"Telephone",suffixIcon:"phone"},expressionProperties:{"templateOptions.hidden":"!model.phone"}},{className:"flex-auto",key:"password",type:"input",templateOptions:{type:"password",required:!0,translate:!0,translatePlaceholder:!0,label:"Mot de passe",placeholder:"Mot de passe"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"is_root",type:"checkbox",templateOptions:{translate:!0,required:!0,label:"Est root ?"},defaultValue:!1,expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0,expressionProperties:{"templateOptions.hidden":"!model.first_name"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{e.model.action="save",e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,i)=>!i.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(N)}}}]}]}];let U=(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o}ngOnInit(){this.form.model=N,this.form.fields=D,this.form.options=E,this.isSpinning=!1}save(e){if("searchSSO"==e.model.action)this.searchUser(e.model.login);else{let t=Object.assign(Object.assign({},e.model),{added_user:this.user.id});this.logger.log("payload ",t),t=h._.omit(t,["id"]),t=Object.assign(Object.assign({},t),{added_user:this.user.id}),this.postData(`${h.T5}/users`,t),t=Object.assign(Object.assign({},t),{updated_user:this.user.id})}}searchUser(e){this.httpService.postData(`${h.T5}/users/searchSSO`,{login:e}).toPromise().then(t=>{console.log(t),t.body.data?this.form.model={login:t.body.data[0].username||"",first_name:t.body.data[0].firstName||"",last_name:t.body.data[0].lastName||"",email:t.body.data[0].email||"",phone:t.body.data[0].phone||"",id:t.body.data[0].id||""}:(this.form.options.resetModel(),this.form.model={login:e},this.alert={type:"error",message:t.body.message},this.setBackendError({message:t.body.message}))}).catch(t=>{this.form.options.resetModel(),this.form.model={login:e},this.logger.error(t),this.alert={type:"error",message:t.statusText,description:t.error.message.error},this.setBackendError({message:t.statusText})}).finally(()=>{this.form.fields[0].fieldGroup[1].fieldGroup[2].fieldGroup[1].templateOptions.loading=!1})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["sso"]],features:[f.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[l.W,a.U],styles:[".search-input .inline{display:inline-block;margin:0}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child{position:relative;top:33px;left:-1.5px}  .search-input .inline:last-child button{border-radius:0 0 10px 0}"]}),e})();var L=i(91841);function F(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"wl-form",3),f.NdJ("onSubmit",function(t){return f.CHM(e),f.oxw().save(t)})("onModelChange",function(t){return f.CHM(e),f.oxw().modelChange(t)}),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("alert",e.alert)("model",e.form.model)("fields",e.form.fields)("options",e.form.options)}}const I=i(23815);let Y=(()=>{class e extends p.K{constructor(e,t,i,s,a,o,l,r){super(e,t,i,s,a,o,l),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o,this.modal=l,this.changeDetectorRef=r,this.isVisible=!1,this.modalTitle="Mise \xe0 jour";const n=this.authService.hasPermissionAuthorizationV2(["USER_LIST.LOCK","USER_LIST.EDIT","USER_LIST.UNLOCK","USER_LIST.EXPORT","USER_LIST.DELETE","SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);this.hasPermissionToLock=n[0],this.hasPermissionToEdit=n[1],this.hasPermissionToUnlock=n[2],this.hasPermissionToExport=n[3],this.hasPermissionToDelete=n[4],this.hasPermissionToShowAllEntityData=n[5],this.hasPermissionToShowDataRoot=n[6]}ngAfterViewInit(){}ngOnInit(){this.form.model=Object.assign(Object.assign({},z),{entity_id:this.user.entity.id}),this.form.fields=this.mapFields(k,"entity_id","hide",!0),this.form.fields=this.mapFields(this.form.fields,"password","templateOptions.required",!1),this.notAllPrivilege&&(this.form.fields=this.mapFields(this.form.fields,"is_root","hide",!0)),this.form.options=C,this.globalFilterFields=["first_name","last_name","email","login"],this.columns=[{field:"first_name",header:"Nom"},{field:"last_name",header:"Pr\xe9noms"},{field:"email",header:"Email"},{field:"phone",header:"Contact"},{field:"login",header:"Login"},{field:"entity",header:"Entit\xe9"},{field:"profile",header:"R\xf4le"},{field:"status",header:"STATUS",type:"status",falseText:"Inactif",trueText:"Actif"},{field:"created_at",header:"CREATED_AT",type:"date"}],this.user&&this.hasPermissionToEdit&&this.actions.push({type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.logger.log(e),this.isVisible=!0,setTimeout(()=>{var t,i;this.alert=void 0,e.status=0!=e.status,e.is_root=0!=e.is_root,e.is_admin=0!=e.is_admin,this.form.model=Object.assign(Object.assign({},e),{phone:null===(t=e.phone)||void 0===t?void 0:t.substring(4,19),prefix:null===(i=e.phone)||void 0===i?void 0:i.substring(0,4)}),this.form.fields[0].fieldGroup[0].template=`<h5>Vous modifiez de l'utilisateur <i>${e.login}</i> </h5>`,this.form.fields[0].fieldGroup[1].fieldGroup[0].templateOptions.label="Enregistrer",this.changeDetectorRef.detectChanges()},1)}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:e=>{this.delete(e,"users")},cancel:e=>{}}),this.user&&this.hasPermissionToLock&&this.actions.push({type:"default",icon:"lock",shape:"circle",title:"D\xe9sactiver l'utilisateur",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:e=>{this.desactiverUser(e)},cancel:e=>{}}),this.user&&this.hasPermissionToUnlock&&this.actions.push({type:"default",icon:"unlock",shape:"circle",title:"Activer l'utilisateur",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:e=>{this.activerUser(e)},cancel:e=>{}}),this.loadCountries()}save(e){this.changeDetectorRef.detectChanges(),this.logger.log("event.model: ",e.model);let t=Object.assign(Object.assign({},e.model),{phone:e.model.prefix+" "+e.model.phone,session:this.user.session_id});this.logger.log("payload ",t);const i=t.id;t=I.omit(t,["id"]),t=Object.assign(Object.assign({},t),{updated_user:this.user.id}),this.putData(`${h.T5}/users/${i}`,t,e=>{e instanceof L.UA||this.handleCancel()})}desactiverUser(e){const t=e.id;let i=I.omit(e,["id"]);i={status:!1,updated_user:this.user.id},this.putData(`${h.T5}/users/${t}`,i,e=>{e instanceof L.UA||this.loadData(this.currentLoadEvent)})}activerUser(e){const t=e.id;let i=I.omit(e,["id"]);i={status:!0,updated_user:this.user.id},this.putData(`${h.T5}/users/${t}`,i,e=>{e instanceof L.UA||this.loadData(this.currentLoadEvent)})}loadData(e){this.loading=!0,this.currentLoadEvent=e,this.getData(`${this.hasPermissionToShowAllEntityData?`${h.T5}/users/`:`${h.T5}/users/byEntity/${this.user.entity.id}`}?page=${e.first/e.rows+1}&per_page=${e.rows}${null!=e.globalFilter?`&search={"sKey":"all","sValue":"${e.globalFilter}"}`:""}${e.sortField&&null!=e.sortField?`&sort=[{"sortField":"${e.sortField}","sortOrder":"${1==e.sortOrder?"ASC":"DESC"}"}]`:'&sort=[{"sortField":"id","sortOrder":"DESC"}]'}`,e=>{if(!(e instanceof L.UA)){let t=e.body.rows;this.user&&!this.user.is_root&&(t=t.filter(e=>!e.is_root)),this.hasPermissionToShowDataRoot||(t=t.filter(e=>!e.profiles.map(e=>e.code).includes("PROF_ROOT"))),t=t.map(e=>{var t;const i=(null===(t=e.entities)||void 0===t?void 0:t.length)?e.entities[0]:{name:""};return Object.assign(Object.assign({},e),{entity:null==i?void 0:i.name,entity_id:null==i?void 0:i.id,profile:e.profiles.map(e=>e.label).join(" | "),trClass:e.status?"Actif":"Inactif"})}),this.data=t,this.loading=!1,this.changeDetectorRef.detectChanges()}})}loadAllEntity(){this.httpService.getData(`${h.T5}/entities`).toPromise().then(e=>{this.isSpinning=!1,this.form.fields=this.mapFields(this.form.fields,"entity_id","templateOptions.options",e.body.rows),this.changeDetectorRef.detectChanges()}).catch(e=>{this.logger.error(e)})}handleCancel(){this.isVisible=!1}loadCountries(){this.httpService.getData(`${h.T5}/countries`).toPromise().then(e=>{let t=e.body.rows;this.isSpinning=!1,this.form.fields=this.mapFields(this.form.fields,"prefix","templateOptions.options",t),this.changeDetectorRef.detectChanges()}).catch(e=>{this.logger.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h),f.Y36(r.Sf),f.Y36(f.sBO))},e.\u0275cmp=f.Xpm({type:e,selectors:[["list"]],features:[f.qOj],decls:3,vars:18,consts:[["nzWidth","920px",3,"nzVisible","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],[3,"alert","model","fields","options","onSubmit","onModelChange",4,"nzModalContent"],[3,"data","styleClass","showTools","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-modal",0),f.NdJ("nzVisibleChange",function(e){return t.isVisible=e})("nzOnCancel",function(){return t.handleCancel()}),f.YNc(1,F,1,4,"wl-form",1),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzVisible",t.isVisible)("nzTitle",t.modalTitle)("nzFooter",null),f.xp6(2),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("styleClass","p-datatable-gridlines p-datatable-sm")("showTools",t.hasPermissionToExport)("columns",t.columns)("showTools",!0)("actions",t.actions)("lazy",!0)("caption","Utilisateurs")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[r.du,r.Hf,o.a,a.U],styles:[".Actif td:last-child button:nth-child(3){display:none}  .Inactif td:last-child button:nth-child(2){display:none}  .search-input .inline{display:inline-block;margin:0!important;padding:0!important}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child button{border-radius:0 0 10px 0}  .search-input .inline:last-child{position:relative;top:1.8rem;left:-1.5px;margin:0;padding:0}  .search-input .inline:last-child nz-input-group{border-radius:0 .2rem .2rem 0!important}"],changeDetection:0}),e})(),M=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!!this.authService.hasMenuAuthorization("USER_CREATE")||(this.router.navigate(["/private"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(d.F0),f.LFG(T.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!!this.authService.hasMenuAuthorization("USER_PROFIL")||(this.router.navigate(["/private"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(d.F0),f.LFG(T.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),R=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!!this.authService.hasMenuAuthorization("USER_LIST")||(this.router.navigate(["/private"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(d.F0),f.LFG(T.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),j=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!!this.authService.hasMenuAuthorization("USER_PERMISSION")||(this.router.navigate(["/private"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(d.F0),f.LFG(T.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),G=(()=>{class e{constructor(e,t){this.router=e,this.authService=t}canActivate(e,t){return!!this.authService.hasMenuAuthorization("SSO")||(this.router.navigate(["/private"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(f.LFG(d.F0),f.LFG(T.e))},e.\u0275prov=f.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=i(55329),J=i(53599),Q=i(17018);let K=(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["users-management"]],features:[f.qOj],decls:71,vars:5,consts:[[1,"page-header"],[1,"d-md-flex","align-items-md-center","justify-content-between"],[1,"media","m-v-10","align-items-center"],["nzIcon","user","nzSrc","assets/images/avatars/thumb-3.jpg",3,"nzSize"],[1,"media-body","m-l-15"],[1,"m-b-0"],[1,"text-gray"],[1,"d-md-flex","align-items-center","d-none"],[1,"media","align-items-center","m-r-40","m-v-5"],[1,"font-size-27"],["nz-icon","","nzType","profile","theme","outline",1,"text-primary"],[1,"d-flex","align-items-center","m-l-10"],[1,"m-b-0","m-r-5"],["nz-icon","","nzType","appstore","theme","outline",1,"text-success"],[1,"media","align-items-center","m-v-5"],["nz-icon","","nzType","team","theme","outline",1,"text-danger"],[1,"row"],[1,"col-md-6","col-lg-3"],[1,"media","align-items-center"],["nzIcon","dollar",1,"ant-avatar-blue",3,"nzSize"],[1,"m-l-15"],[1,"m-b-0","text-muted"],["nzIcon","line-chart",1,"ant-avatar-cyan",3,"nzSize"],["nzIcon","profile",1,"ant-avatar-gold",3,"nzSize"],["nzIcon","user",1,"ant-avatar-purple",3,"nzSize"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"div",2),f._UZ(3,"nz-avatar",3),f.TgZ(4,"div",4),f.TgZ(5,"h4",5),f._uU(6,"Welcome back, Nichols!"),f.qZA(),f.TgZ(7,"span",6),f._uU(8,"Project Manager"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"div",7),f.TgZ(10,"div",8),f.TgZ(11,"div",9),f._UZ(12,"i",10),f.qZA(),f.TgZ(13,"div",11),f.TgZ(14,"h2",12),f._uU(15,"78"),f.qZA(),f.TgZ(16,"span",6),f._uU(17,"Tasks"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(18,"div",8),f.TgZ(19,"div",9),f._UZ(20,"i",13),f.qZA(),f.TgZ(21,"div",11),f.TgZ(22,"h2",12),f._uU(23,"21"),f.qZA(),f.TgZ(24,"span",6),f._uU(25,"Projects"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"div",14),f.TgZ(27,"div",9),f._UZ(28,"i",15),f.qZA(),f.TgZ(29,"div",11),f.TgZ(30,"h2",12),f._uU(31,"39"),f.qZA(),f.TgZ(32,"span",6),f._uU(33,"Members"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(34,"div",16),f.TgZ(35,"div",17),f.TgZ(36,"nz-card"),f.TgZ(37,"div",18),f._UZ(38,"nz-avatar",19),f.TgZ(39,"div",20),f.TgZ(40,"h2",5),f._uU(41,"$23,523"),f.qZA(),f.TgZ(42,"p",21),f._uU(43,"Profit"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(44,"div",17),f.TgZ(45,"nz-card"),f.TgZ(46,"div",18),f._UZ(47,"nz-avatar",22),f.TgZ(48,"div",20),f.TgZ(49,"h2",5),f._uU(50,"+ 17.21%"),f.qZA(),f.TgZ(51,"p",21),f._uU(52,"Growth"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"div",17),f.TgZ(54,"nz-card"),f.TgZ(55,"div",18),f._UZ(56,"nz-avatar",23),f.TgZ(57,"div",20),f.TgZ(58,"h2",5),f._uU(59,"3,685"),f.qZA(),f.TgZ(60,"p",21),f._uU(61,"Orders"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(62,"div",17),f.TgZ(63,"nz-card"),f.TgZ(64,"div",18),f._UZ(65,"nz-avatar",24),f.TgZ(66,"div",20),f.TgZ(67,"h2",5),f._uU(68,"1,832"),f.qZA(),f.TgZ(69,"p",21),f._uU(70,"Customers"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&e&&(f.xp6(3),f.Q6J("nzSize",50),f.xp6(35),f.Q6J("nzSize",60),f.xp6(9),f.Q6J("nzSize",50),f.xp6(9),f.Q6J("nzSize",50),f.xp6(9),f.Q6J("nzSize",50))},directives:[V.Dz,J.Ls,Q.bd],styles:[""]}),e})();const W={entity_type_id:2},H={},B=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3 wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,required:!0,translatePlaceholder:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"user",options:[],valueProp:"id",labelProp:"name"},hideExpression:"model.id"},{className:"flex-3",key:"code",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,label:"Matricule",placeholder:"Matricule"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"}},{className:"flex-3",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail",pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/},validation:{messages:{pattern:(e,t)=>`"${t.formControl.value}" n'est pas une adresse email valide`}}},{className:"flex-3",fieldGroupClassName:"d-flex search-input",fieldGroup:[{className:"inline flex-3",key:"prefix",type:"select",templateOptions:{translate:!0,showSearch:!0,label:"Telephone",labelProp:"phone_prefix",valueProp:"phone_prefix",options:[]},expressionProperties:{"templateOptions.required":"model.phone"},defaultValue:"+225"},{className:"inline flex-7",key:"phone",type:"input",templateOptions:{suffixIcon:"phone",type:"number",minLength:6,maxLength:10},validation:{messages:{pattern:(e,t)=>`Le num\xe9ro ${t.formControl.value} n'est pas valide`}},validators:{validation:[class{static maxLength(e){return t=>t.value?(t.value.length>e&&t.setValue(t.value.substring(0,e)),null):null}}.maxLength(10)]}}]},{className:"flex-3",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,autocomplete:!1}},{className:"flex-3",key:"password",type:"input",templateOptions:{type:"password",translate:!0,required:!0,translatePlaceholder:!0,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$",label:"Mot de passe",placeholder:"Mot de passe"},validation:{messages:{pattern:(e,t)=>"Le mot de passe doit contenir au moins 8 caract\xe8res, 1 caract\xe8re special, 1 nombre, 1 majuscule et une minuscule"}}},{className:"flex-1",key:"is_root",type:"checkbox",templateOptions:{translate:!0,label:"Est root ?"},defaultValue:!1},{className:"flex-3",key:"is_admin",type:"checkbox",templateOptions:{translate:!0,label:"Est admin ?"},defaultValue:!0},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:e=>{e.templateOptions.loading=!0,e.form.statusChanges.subscribe(t=>{e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":(e,t,i)=>!i.form.valid}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:e=>{e.options.resetModel(W)}}}]}]}],X=[{path:"",component:K},{path:"create",canActivate:[M],component:q,data:{title:"Cr\xe9er",breadcrumb:"Cr\xe9er"}},{path:"user-profile",canActivate:[$],component:P,data:{title:"Autorisation",breadcrumb:"Autorisation"}},{path:"user-permission",canActivate:[j],component:x,data:{title:"Permission utilisateur",breadcrumb:"Permission utilisateur"}},{path:"sso",canActivate:[G],component:U,data:{title:"SSO_Synchronisation",breadcrumb:"SSO_Synchronisation"}},{path:"list",canActivate:[R],component:Y,data:{title:"Liste",breadcrumb:"Liste"}},{path:"users-management",component:K,data:{title:"UsersManagement",breadcrumb:"UsersManagement"}},{path:"users",component:(()=>{class e extends p.K{constructor(e,t,i,s,a,o){super(e,t,i,s,a,o),this.logger=e,this.httpService=t,this.envService=i,this.messageService=s,this.authService=a,this.menuService=o}ngOnInit(){this.form.model=W,this.form.options=H,this.form.fields=B,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:e=>{this.edit(e),this.form.model=Object.assign({},e)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:e=>{this.delete(e,"users")},cancel:e=>{}}]}save(e){this.logger.log("model: ",e.model);let t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}loadData(e){console.log(e),setTimeout(()=>{this.loading=!0},1e3)}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(g.Kf),f.Y36(b.O),f.Y36(y.L),f.Y36(v.dD),f.Y36(T.e),f.Y36(O.h))},e.\u0275cmp=f.Xpm({type:e,selectors:[["users"]],features:[f.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(f.TgZ(0,"nz-spin",0),f.TgZ(1,"wl-form",1),f.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),f.qZA(),f.qZA(),f.TgZ(2,"wl-table",2),f.NdJ("onLazyLoad",function(e){return t.loadData(e)}),f.qZA()),2&e&&(f.Q6J("nzSpinning",t.isSpinning),f.xp6(1),f.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),f.xp6(1),f.Udp("margin-top","1rem"),f.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","Users ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[l.W,a.U,o.a],styles:[""]}),e})(),data:{title:"Users",breadcrumb:"Users"}}];let ee=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[d.Bz.forChild(X)],d.Bz]}),e})(),te=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[s.ez,ee,a.e,o.n,l.j,r.Qp,n.Q,V.Rt,J.PV,Q.vh]]}),e})()}}]);