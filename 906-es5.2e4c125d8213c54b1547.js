!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?a:String(a)),n)}var o,a}function o(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var o=c(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkwil_admin_angular=self.webpackChunkwil_admin_angular||[]).push([[906],{4906:function(t,n,r){"use strict";r.r(n),r.d(n,{UsersManagementModule:function(){return le}});var l=r(38583),c=r(65461),u=r(977),p=r(66782),d=r(98542),f=r(24020),m=r(95987),h=r(99688),g={},v={},y=[{template:"<p>Vous pouvez ajouter des permissions \xe0 un utilisateur en selectionnant les permissions que vous voulez lui attribuer.</p>"},{fieldGroupClassName:"d-flex flex-wrap flex-start",fieldGroup:[{className:"flex-5",key:"user_id",type:"select",templateOptions:{required:!0,translate:!0,label:"Utilisateur",options:[],valueProp:"id",labelProp:"login",onModelChange:function(e,t){console.log(t,e);var i=e.templateOptions.options.find(function(e){return e.id==t});i&&(e.parent.fieldGroup[1].templateOptions.options=e.parent.fieldGroup[1].templateOptions.options.map(function(e){return i.permissions.map(function(e){return e.id}).includes(e.id)?Object.assign(Object.assign({},e),{direction:"right"}):Object.assign(Object.assign({},e),{direction:"left"})}),e.form.get("permission_id").setValue(i.permission))}}},{className:"flex-10",key:"permission_id",type:"transfert",templateOptions:{translate:!0,required:!0,right:"Attribuer",left:"Retirer",showCode:!0,label:"Permissions",change:function(e,t){var i=e.templateOptions.options.filter(function(e){return"right"==e.direction});e.formControl.setValue(i)}}},{className:"flex-1",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!1}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(g)}}}]}],b=r(42394),O=r(37716),T=r(44212),S=r(18859),x=r(52121),A=r(68058),_=r(4768),k=r(28723),P=function(){var e=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l){var c;i(this,n),(c=t.call(this,e,o,a,r,s,l)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=s,c.menuService=l;var u=c.authService.hasPermissionAuthorizationV2(["SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);return c.hasPermissionToShowAllEntityData=u[0],c.hasPermissionToShowDataRoot=u[1],c}return o(n,[{key:"ngOnInit",value:function(){this.form.model=g,this.form.fields=y,this.form.options=v,this.loadAllUserPermission(),this.loadAllPermission()}},{key:"save",value:function(e){var t,i=this;this.logger.log("model: ",e.model);var n=(null===(t=e.model.permission_id)||void 0===t?void 0:t.length)?e.model.permission_id.map(function(t){return{user_id:e.model.user_id,permission_id:t.id,status:e.model.status,added_user:i.user.id}}):[{user_id:e.model.user_id,permission_id:void 0,status:e.model.status,added_user:this.user.id}];this.logger.log("save user-profil ==> ",n),this.httpService.postData("".concat(b.T5,"/user-permissions"),n).subscribe(function(e){i.logger.log("postData response ===> ",e),i.loadAllUserPermission(),i.setMessage("success","Enregistrement effectu\xe9 avec succ\xe8s !"),setTimeout(function(){i.form.options.resetModel()},1e3)},function(e){if(i.logger.log("postData error ===> ",e),i.setBackendError(e.error),e.error.errors){var t="";e.error.errors.forEach(function(e){t+=e.msg+" "+e.param+"\n"}),i.alert={type:"error",message:e.error.message,description:t}}},function(){})}},{key:"loadAllPermission",value:function(){var e=this;this.httpService.getData(this.hasPermissionToShowAllEntityData?"".concat(b.T5,"/permissions"):"".concat(b.T5,"/permissions/byEntityAdded/").concat(this.user.entity.id)).toPromise().then(function(t){e.form.fields=e.mapFields(e.form.fields,"permission_id","templateOptions.options",t.body.rows)}).catch(function(t){e.logger.error(t)})}},{key:"loadAllUserPermission",value:function(){var e=this;this.httpService.getData(this.hasPermissionToShowAllEntityData?"".concat(b.T5,"/user-permissions/deep"):"".concat(b.T5,"/user-permissions/byEntity/deep/").concat(this.user.entity.id)).toPromise().then(function(t){e.isSpinning=!1;var i=t.body.rows;e.hasPermissionToShowDataRoot||(i=i.filter(function(e){return!e.is_root})),e.form.fields=e.mapFields(e.form.fields,"user_id","templateOptions.options",i)}).catch(function(t){e.logger.error(t)})}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},e.\u0275cmp=O.Xpm({type:e,selectors:[["user-permission"]],features:[O.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-spin",0),O.TgZ(1,"wl-form",1),O.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),O.qZA(),O.qZA()),2&e&&(O.Q6J("nzSpinning",t.isSpinning),O.xp6(1),O.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[p.W,c.U],styles:["[_nghost-%COMP%]{background:#fff;padding:10px!important;display:block}"]}),e}(),Z={},w={},z=[{template:"<p>Vous pouvez attribuer un r\xf4le \xe0 un utilisateur en selectionnant le r\xf4le apr\xe8s avoir selectionn\xe9 l'utilisateur.</p>"},{fieldGroupClassName:"d-flex flex-wrap flex-start",fieldGroup:[{className:"flex-6",key:"user_id",type:"list-box",templateOptions:{required:!0,translate:!0,label:"Utilisateurs",options:[],divider:"right",dividerText:"Selectionnez le r\xf4le \xe0 attribuer",checkbox:!1,multiple:!1,valueProp:"id",labelProp:"login",onChange:function(e,t){var i;e.form.get("profile_id").setValue(null===(i=e.templateOptions.options.find(function(e){return e.id==t.value}))||void 0===i?void 0:i.profiles.map(function(e){return e.id}))}}},{className:"flex-4",key:"profile_id",type:"list-box",templateOptions:{translate:!0,label:"R\xf4les",options:[],valueProp:"id",onChange:function(e){}}},{className:"flex-1",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(Z)}}}]}],C=r(50249),E=function(){var e=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l){var c;i(this,n),(c=t.call(this,e,o,a,r,s,l)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=s,c.menuService=l;var u=c.authService.hasPermissionAuthorizationV2(["SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);return c.hasPermissionToShowAllEntityData=u[0],c.hasPermissionToShowDataRoot=u[1],c}return o(n,[{key:"ngOnInit",value:function(){this.form.fields=z,this.form.model=Z,this.form.options=w,this.loadAllProfil(),this.loadAllUser()}},{key:"save",value:function(e){var t,i=this;this.logger.log("model: ",e.model);var n=(null===(t=e.model.profile_id)||void 0===t?void 0:t.length)?e.model.profile_id.map(function(t){return{user_id:e.model.user_id,profile_id:t,status:e.model.status||!0,added_user:i.user.id}}):[{user_id:e.model.user_id,profile_id:void 0,status:e.model.status||!0,added_user:this.user.id}];this.logger.log("save user-profil ==> ",n),this.httpService.postData("".concat(b.T5,"/user-profiles"),n).subscribe(function(e){i.logger.log("postData response ===> ",e),i.loadAllUser(),i.setMessage("success","Enregistrement effectu\xe9 avec succ\xe8s !"),setTimeout(function(){i.form.model={},i.form.options.resetModel()},1e3)},function(e){i.logger.log("postData error ===> ",e),i.setBackendError(e.error);var t="";e.error.errors&&e.error.errors.forEach(function(e){t+=e.msg+" "+e.param+"\n"}),i.alert={type:"error",message:e.error.message,description:t}},function(){})}},{key:"loadAllProfil",value:function(){var e=this;this.httpService.getData(this.hasPermissionToShowAllEntityData?"".concat(b.T5,"/profiles/"):"".concat(b.T5,"/profiles/byEntity/").concat(this.user.entity.id)).toPromise().then(function(t){var i=t.body.rows;e.hasPermissionToShowDataRoot||(i=i.filter(function(e){return"PROF_ROOT"!=e.code})),e.form.fields=e.mapFields(e.form.fields,"profile_id","templateOptions.options",i)}).catch(function(t){e.logger.error(t)})}},{key:"loadAllUser",value:function(){var e=this;this.httpService.getData(this.hasPermissionToShowAllEntityData?"".concat(b.T5,"/user-profiles/deep"):"".concat(b.T5,"/user-profiles/byEntity/deep/").concat(this.user.entity.id)).toPromise().then(function(t){console.log(t),e.isSpinning=!1;var i=t.body.rows;e.hasPermissionToShowDataRoot||(i=i.filter(function(e){return!e.is_root&&!e.profiles.map(function(e){return e.code}).includes("PROF_ROOT")})),e.form.fields=e.mapFields(e.form.fields,"user_id","templateOptions.options",i)}).catch(function(t){e.logger.error(t)})}},{key:"loadFields",value:function(){var e=this;this.httpService.get("assets/data/form-schema.json").toPromise().then(function(t){console.log("load actions ==>",t),e.form.fields=(0,C.q3)(JSON.stringify(t.body)),e.loadAllProfil(),e.loadAllUser()}).catch(function(t){e.logger.error(t)})}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},e.\u0275cmp=O.Xpm({type:e,selectors:[["user-profil"]],features:[O.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-spin",0),O.TgZ(1,"wl-form",1),O.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),O.qZA(),O.qZA()),2&e&&(O.Q6J("nzSpinning",t.isSpinning),O.xp6(1),O.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[p.W,c.U],styles:["[_nghost-%COMP%]{background:#fff;padding:10px!important;display:block}"]}),e}(),N={entity_type_id:2},q={},D=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3 wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,required:!0,translatePlaceholder:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"user",options:[],valueProp:"id",labelProp:"name"},hideExpression:"model.id"},{className:"flex-3",key:"code",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,label:"Matricule",placeholder:"Matricule"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"}},{className:"flex-3",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail",pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/},validation:{messages:{pattern:function(e,t){return'"'.concat(t.formControl.value,"\" n'est pas une adresse email valide")}}}},{className:"flex-3",fieldGroupClassName:"d-flex search-input",fieldGroup:[{className:"inline flex-3",key:"prefix",type:"select",templateOptions:{translate:!0,showSearch:!0,label:"Telephone",labelProp:"phone_prefix",valueProp:"phone_prefix",options:[]},expressionProperties:{"templateOptions.required":"model.phone"},defaultValue:"+225"},{className:"inline flex-7",key:"phone",type:"input",templateOptions:{suffixIcon:"phone",type:"number",minLength:6,maxLength:10},validation:{messages:{pattern:function(e,t){return"Le num\xe9ro ".concat(t.formControl.value," n'est pas valide")}}},validators:{validation:[function(){function e(){i(this,e)}return o(e,null,[{key:"maxLength",value:function(e){return function(t){return t.value?(t.value.length>e&&t.setValue(t.value.substring(0,e)),null):null}}}]),e}().maxLength(10)]}}]},{className:"flex-3",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,autocomplete:!1}},{className:"flex-3",key:"password",type:"input",templateOptions:{type:"password",translate:!0,required:!0,translatePlaceholder:!0,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$",label:"Mot de passe",placeholder:"Mot de passe"},validation:{messages:{pattern:function(e,t){return"Le mot de passe doit contenir au moins 8 caract\xe8res, 1 caract\xe8re special, 1 nombre, 1 majuscule et une minuscule"}}}},{className:"flex-1",key:"is_root",type:"checkbox",templateOptions:{translate:!0,label:"Est root ?"},defaultValue:!1},{className:"flex-3",key:"is_admin",type:"checkbox",templateOptions:{translate:!0,label:"Est admin ?"},defaultValue:!0},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){console.log(),e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(N)}}}]}]}],U=r(23815),L=function(){var t=function(t){a(r,t);var n=s(r);function r(e,t,o,a,s,l){var c;return i(this,r),(c=n.call(this,e,t,o,a,s,l)).logger=e,c.httpService=t,c.envService=o,c.messageService=a,c.authService=s,c.menuService=l,c}return o(r,[{key:"ngOnInit",value:function(){this.form.model=this.notAllPrivilege?Object.assign(Object.assign({},N),{entity_id:this.user.entity.id}):N,this.notAllPrivilege?(this.form.fields=this.mapFields(D,"entity_id","hide",!0),this.form.fields=this.mapFields(this.form.fields,"is_root","hide",!0)):this.form.fields=D,this.form.options=q,this.loadAllEntity(),this.loadCountries(),this.isSpinning=!1}},{key:"save",value:function(e){var t=Object.assign(Object.assign({},e.model),{matricule:e.model.code,phone:e.model.prefix+""+e.model.phone,session:this.user.session_id});console.log(t),this.logger.log("payload ",t),t.id&&null!=t.id||(t=U.omit(t,["id"]),t=Object.assign(Object.assign({},t),{added_user:this.user.id}),this.postData("".concat(b.T5,"/users"),t))}},{key:"loadAllEntity",value:function(){var t=this,i=this.authService.hasPermissionAuthorization("SHOW_DATA.ALL_ENTITY")?"".concat(b.T5,"/entities/"):"".concat(b.T5,"/entities/byUserEntityAdded/").concat(this.user.entity.id);this.httpService.getData("".concat(i)).toPromise().then(function(i){t.isSpinning=!1;var n=i.body.rows;t.notAllPrivilege&&n.push.apply(n,e(t.user.entities)),t.form.fields=t.mapFields(t.form.fields,"entity_id","templateOptions.options",n)}).catch(function(e){t.logger.error(e)})}},{key:"loadCountries",value:function(){var e=this;this.httpService.getData("".concat(b.T5,"/countries")).toPromise().then(function(t){var i=t.body.rows;e.isSpinning=!1,e.form.fields=e.mapFields(e.form.fields,"prefix","templateOptions.options",i)}).catch(function(t){e.logger.error(t)})}}]),r}(h.K);return t.\u0275fac=function(e){return new(e||t)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},t.\u0275cmp=O.Xpm({type:t,selectors:[["create"]],features:[O.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-spin",0),O.TgZ(1,"wl-form",1),O.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),O.qZA(),O.qZA()),2&e&&(O.Q6J("nzSpinning",t.isSpinning),O.xp6(1),O.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[p.W,c.U],styles:[".search-input .inline{display:inline-block;margin:0!important;padding:0!important}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child button{border-radius:0 0 10px 0}  .search-input .inline:last-child{position:relative;top:1.8rem;left:-1.5px;margin:0;padding:0}  .search-input .inline:last-child nz-input-group{border-radius:0 .2rem .2rem 0!important}"]}),t}(),j={},I={formState:{showError:!1}},F=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{template:"<h4>Synchroniser un utilisateur existant</h4><p>Veuillez effectuer une recherche \xe0 partir du login de l'utilisateur que vous souhaitez synchroniser.</p>"},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{key:"action",type:"input",hide:!0},{className:"flex-auto wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-4",fieldGroupClassName:"d-flex flex-wrap search-input",fieldGroup:[{className:"inline",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,change:function(e,t){console.log(e.model.login)}},validation:{show:!0}},{className:"inline",type:"button",templateOptions:{type:"submit",icon:"search",loading:!1,disabled:!0,click:function(e){e.model.action="searchSSO",e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":"!model.login"}}]},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"bank",options:[],valueProp:"id",labelProp:"name",url:b.T5+"/entities/load"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-4",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"},expressionProperties:{"templateOptions.hidden":"!model.last_name"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,readonly:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail"},expressionProperties:{"templateOptions.hidden":"!model.email"}},{className:"flex-3",key:"phone",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Telephone",placeholder:"Telephone",suffixIcon:"phone"},expressionProperties:{"templateOptions.hidden":"!model.phone"}},{className:"flex-auto",key:"password",type:"input",templateOptions:{type:"password",required:!0,translate:!0,translatePlaceholder:!0,label:"Mot de passe",placeholder:"Mot de passe"},expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"is_root",type:"checkbox",templateOptions:{translate:!0,required:!0,label:"Est root ?"},defaultValue:!1,expressionProperties:{"templateOptions.hidden":"!model.first_name"}},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0,expressionProperties:{"templateOptions.hidden":"!model.first_name"}}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.model.action="save",e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(j)}}}]}]}],Y=function(){var e=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l){var c;return i(this,n),(c=t.call(this,e,o,a,r,s,l)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=s,c.menuService=l,c}return o(n,[{key:"ngOnInit",value:function(){this.form.model=j,this.form.fields=F,this.form.options=I,this.isSpinning=!1}},{key:"save",value:function(e){if("searchSSO"==e.model.action)this.searchUser(e.model.login);else{var t=Object.assign(Object.assign({},e.model),{added_user:this.user.id});this.logger.log("payload ",t),t=b._.omit(t,["id"]),t=Object.assign(Object.assign({},t),{added_user:this.user.id}),this.postData("".concat(b.T5,"/users"),t),t=Object.assign(Object.assign({},t),{updated_user:this.user.id})}}},{key:"searchUser",value:function(e){var t=this;this.httpService.postData("".concat(b.T5,"/users/searchSSO"),{login:e}).toPromise().then(function(i){console.log(i),i.body.data?t.form.model={login:i.body.data[0].username||"",first_name:i.body.data[0].firstName||"",last_name:i.body.data[0].lastName||"",email:i.body.data[0].email||"",phone:i.body.data[0].phone||"",id:i.body.data[0].id||""}:(t.form.options.resetModel(),t.form.model={login:e},t.alert={type:"error",message:i.body.message},t.setBackendError({message:i.body.message}))}).catch(function(i){t.form.options.resetModel(),t.form.model={login:e},t.logger.error(i),t.alert={type:"error",message:i.statusText,description:i.error.message.error},t.setBackendError({message:i.statusText})}).finally(function(){t.form.fields[0].fieldGroup[1].fieldGroup[2].fieldGroup[1].templateOptions.loading=!1})}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},e.\u0275cmp=O.Xpm({type:e,selectors:[["sso"]],features:[O.qOj],decls:2,vars:5,consts:[["nzTip","Chargement...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-spin",0),O.TgZ(1,"wl-form",1),O.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),O.qZA(),O.qZA()),2&e&&(O.Q6J("nzSpinning",t.isSpinning),O.xp6(1),O.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options))},directives:[p.W,c.U],styles:[".search-input .inline{display:inline-block;margin:0}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child{position:relative;top:33px;left:-1.5px}  .search-input .inline:last-child button{border-radius:0 0 10px 0}"]}),e}(),R=r(91841);function M(e,t){if(1&e){var i=O.EpF();O.TgZ(0,"wl-form",3),O.NdJ("onSubmit",function(e){return O.CHM(i),O.oxw().save(e)})("onModelChange",function(e){return O.CHM(i),O.oxw().modelChange(e)}),O.qZA()}if(2&e){var n=O.oxw();O.Q6J("alert",n.alert)("model",n.form.model)("fields",n.form.fields)("options",n.form.options)}}var G,V,J=r(23815),Q=function(){var e=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l,c,u){var p;i(this,n),(p=t.call(this,e,o,a,r,s,l,c)).logger=e,p.httpService=o,p.envService=a,p.messageService=r,p.authService=s,p.menuService=l,p.modal=c,p.changeDetectorRef=u,p.isVisible=!1,p.modalTitle="Mise \xe0 jour";var d=p.authService.hasPermissionAuthorizationV2(["USER_LIST.LOCK","USER_LIST.EDIT","USER_LIST.UNLOCK","USER_LIST.EXPORT","USER_LIST.DELETE","SHOW_DATA.ALL_ENTITY","SHOW_DATA.ROOT"]);return p.hasPermissionToLock=d[0],p.hasPermissionToEdit=d[1],p.hasPermissionToUnlock=d[2],p.hasPermissionToExport=d[3],p.hasPermissionToDelete=d[4],p.hasPermissionToShowAllEntityData=d[5],p.hasPermissionToShowDataRoot=d[6],p}return o(n,[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){var e=this;this.form.model=Object.assign(Object.assign({},N),{entity_id:this.user.entity.id}),this.form.fields=this.mapFields(D,"entity_id","hide",!0),this.form.fields=this.mapFields(this.form.fields,"password","templateOptions.required",!1),this.notAllPrivilege&&(this.form.fields=this.mapFields(this.form.fields,"is_root","hide",!0)),this.form.options=q,this.globalFilterFields=["first_name","last_name","email","login"],this.columns=[{field:"first_name",header:"Nom"},{field:"last_name",header:"Pr\xe9noms"},{field:"email",header:"Email"},{field:"phone",header:"Contact"},{field:"login",header:"Login"},{field:"entity",header:"Entit\xe9"},{field:"profile",header:"R\xf4le"},{field:"status",header:"STATUS",type:"status",falseText:"Inactif",trueText:"Actif"},{field:"created_at",header:"CREATED_AT",type:"date"}],this.user&&this.hasPermissionToEdit&&this.actions.push({type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.logger.log(t),e.isVisible=!0,setTimeout(function(){var i,n;e.alert=void 0,t.status=0!=t.status,t.is_root=0!=t.is_root,t.is_admin=0!=t.is_admin,e.form.model=Object.assign(Object.assign({},t),{phone:null===(i=t.phone)||void 0===i?void 0:i.substring(4,19),prefix:null===(n=t.phone)||void 0===n?void 0:n.substring(0,4)}),e.form.fields[0].fieldGroup[0].template="<h5>Vous modifiez de l'utilisateur <i>".concat(t.login,"</i> </h5>"),e.form.fields[0].fieldGroup[1].fieldGroup[0].templateOptions.label="Enregistrer",e.changeDetectorRef.detectChanges()},1)}}),this.user&&this.hasPermissionToDelete&&this.actions.push({type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.delete(t,"users")},cancel:function(e){}}),this.user&&this.hasPermissionToLock&&this.actions.push({type:"default",icon:"lock",shape:"circle",title:"D\xe9sactiver l'utilisateur",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.desactiverUser(t)},cancel:function(e){}}),this.user&&this.hasPermissionToUnlock&&this.actions.push({type:"default",icon:"unlock",shape:"circle",title:"Activer l'utilisateur",popConfirm:!0,popTitle:"Etes-vous s\xfbre ?",cancelText:"Annuler",okText:"Oui",loading:!1,click:function(t){e.activerUser(t)},cancel:function(e){}}),this.loadCountries()}},{key:"save",value:function(e){var t=this;this.changeDetectorRef.detectChanges(),this.logger.log("event.model: ",e.model);var i=Object.assign(Object.assign({},e.model),{phone:e.model.prefix+" "+e.model.phone,session:this.user.session_id});this.logger.log("payload ",i);var n=i.id;i=J.omit(i,["id"]),i=Object.assign(Object.assign({},i),{updated_user:this.user.id}),this.putData("".concat(b.T5,"/users/").concat(n),i,function(e){e instanceof R.UA||t.handleCancel()})}},{key:"desactiverUser",value:function(e){var t=this,i=e.id,n=J.omit(e,["id"]);n={status:!1,updated_user:this.user.id},this.putData("".concat(b.T5,"/users/").concat(i),n,function(e){e instanceof R.UA||t.loadData(t.currentLoadEvent)})}},{key:"activerUser",value:function(e){var t=this,i=e.id,n=J.omit(e,["id"]);n={status:!0,updated_user:this.user.id},this.putData("".concat(b.T5,"/users/").concat(i),n,function(e){e instanceof R.UA||t.loadData(t.currentLoadEvent)})}},{key:"loadData",value:function(e){var t=this;this.loading=!0,this.currentLoadEvent=e,this.getData("".concat(this.hasPermissionToShowAllEntityData?"".concat(b.T5,"/users/"):"".concat(b.T5,"/users/byEntity/").concat(this.user.entity.id),"?page=").concat(e.first/e.rows+1,"&per_page=").concat(e.rows).concat(null!=e.globalFilter?'&search={"sKey":"all","sValue":"'.concat(e.globalFilter,'"}'):"").concat(e.sortField&&null!=e.sortField?'&sort=[{"sortField":"'.concat(e.sortField,'","sortOrder":"').concat(1==e.sortOrder?"ASC":"DESC",'"}]'):'&sort=[{"sortField":"id","sortOrder":"DESC"}]'),function(e){if(!(e instanceof R.UA)){var i=e.body.rows;t.user&&!t.user.is_root&&(i=i.filter(function(e){return!e.is_root})),t.hasPermissionToShowDataRoot||(i=i.filter(function(e){return!e.profiles.map(function(e){return e.code}).includes("PROF_ROOT")})),i=i.map(function(e){var t,i=(null===(t=e.entities)||void 0===t?void 0:t.length)?e.entities[0]:{name:""};return Object.assign(Object.assign({},e),{entity:null==i?void 0:i.name,entity_id:null==i?void 0:i.id,profile:e.profiles.map(function(e){return e.label}).join(" | "),trClass:e.status?"Actif":"Inactif"})}),t.data=i,t.loading=!1,t.changeDetectorRef.detectChanges()}})}},{key:"loadAllEntity",value:function(){var e=this;this.httpService.getData("".concat(b.T5,"/entities")).toPromise().then(function(t){e.isSpinning=!1,e.form.fields=e.mapFields(e.form.fields,"entity_id","templateOptions.options",t.body.rows),e.changeDetectorRef.detectChanges()}).catch(function(t){e.logger.error(t)})}},{key:"handleCancel",value:function(){this.isVisible=!1}},{key:"loadCountries",value:function(){var e=this;this.httpService.getData("".concat(b.T5,"/countries")).toPromise().then(function(t){var i=t.body.rows;e.isSpinning=!1,e.form.fields=e.mapFields(e.form.fields,"prefix","templateOptions.options",i),e.changeDetectorRef.detectChanges()}).catch(function(t){e.logger.error(t)})}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h),O.Y36(d.Sf),O.Y36(O.sBO))},e.\u0275cmp=O.Xpm({type:e,selectors:[["list"]],features:[O.qOj],decls:3,vars:18,consts:[["nzWidth","920px",3,"nzVisible","nzTitle","nzFooter","nzVisibleChange","nzOnCancel"],[3,"alert","model","fields","options","onSubmit","onModelChange",4,"nzModalContent"],[3,"data","styleClass","showTools","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"],[3,"alert","model","fields","options","onSubmit","onModelChange"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-modal",0),O.NdJ("nzVisibleChange",function(e){return t.isVisible=e})("nzOnCancel",function(){return t.handleCancel()}),O.YNc(1,M,1,4,"wl-form",1),O.qZA(),O.TgZ(2,"wl-table",2),O.NdJ("onLazyLoad",function(e){return t.loadData(e)}),O.qZA()),2&e&&(O.Q6J("nzVisible",t.isVisible)("nzTitle",t.modalTitle)("nzFooter",null),O.xp6(2),O.Udp("margin-top","1rem"),O.Q6J("data",t.data)("styleClass","p-datatable-gridlines p-datatable-sm")("showTools",t.hasPermissionToExport)("columns",t.columns)("showTools",!0)("actions",t.actions)("lazy",!0)("caption","Utilisateurs")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[d.du,d.Hf,u.a,c.U],styles:[".Actif td:last-child button:nth-child(3){display:none}  .Inactif td:last-child button:nth-child(2){display:none}  .search-input .inline{display:inline-block;margin:0!important;padding:0!important}  .search-input .inline nz-input-group{border-radius:.2rem 0 0 .2rem!important}  .search-input .inline:last-child button{border-radius:0 0 10px 0}  .search-input .inline:last-child{position:relative;top:1.8rem;left:-1.5px;margin:0;padding:0}  .search-input .inline:last-child nz-input-group{border-radius:0 .2rem .2rem 0!important}"],changeDetection:0}),e}(),K=function(){var e=function(){function e(t,n){i(this,e),this.router=t,this.authService=n}return o(e,[{key:"canActivate",value:function(e,t){return!!this.authService.hasMenuAuthorization("USER_CREATE")||(this.router.navigate(["/private"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(m.F0),O.LFG(_.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),W=function(){var e=function(){function e(t,n){i(this,e),this.router=t,this.authService=n}return o(e,[{key:"canActivate",value:function(e,t){return!!this.authService.hasMenuAuthorization("USER_PROFIL")||(this.router.navigate(["/private"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(m.F0),O.LFG(_.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),B=function(){var e=function(){function e(t,n){i(this,e),this.router=t,this.authService=n}return o(e,[{key:"canActivate",value:function(e,t){return!!this.authService.hasMenuAuthorization("USER_LIST")||(this.router.navigate(["/private"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(m.F0),O.LFG(_.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),H=function(){var e=function(){function e(t,n){i(this,e),this.router=t,this.authService=n}return o(e,[{key:"canActivate",value:function(e,t){return!!this.authService.hasMenuAuthorization("USER_PERMISSION")||(this.router.navigate(["/private"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(m.F0),O.LFG(_.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),X=function(){var e=function(){function e(t,n){i(this,e),this.router=t,this.authService=n}return o(e,[{key:"canActivate",value:function(e,t){return!!this.authService.hasMenuAuthorization("SSO")||(this.router.navigate(["/private"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(O.LFG(m.F0),O.LFG(_.e))},e.\u0275prov=O.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),$=r(55329),ee=r(53599),te=r(17018),ie=function(){var e=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l){var c;return i(this,n),(c=t.call(this,e,o,a,r,s,l)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=s,c.menuService=l,c}return o(n,[{key:"ngOnInit",value:function(){}}]),n}(h.K);return e.\u0275fac=function(t){return new(t||e)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},e.\u0275cmp=O.Xpm({type:e,selectors:[["users-management"]],features:[O.qOj],decls:71,vars:5,consts:[[1,"page-header"],[1,"d-md-flex","align-items-md-center","justify-content-between"],[1,"media","m-v-10","align-items-center"],["nzIcon","user","nzSrc","assets/images/avatars/thumb-3.jpg",3,"nzSize"],[1,"media-body","m-l-15"],[1,"m-b-0"],[1,"text-gray"],[1,"d-md-flex","align-items-center","d-none"],[1,"media","align-items-center","m-r-40","m-v-5"],[1,"font-size-27"],["nz-icon","","nzType","profile","theme","outline",1,"text-primary"],[1,"d-flex","align-items-center","m-l-10"],[1,"m-b-0","m-r-5"],["nz-icon","","nzType","appstore","theme","outline",1,"text-success"],[1,"media","align-items-center","m-v-5"],["nz-icon","","nzType","team","theme","outline",1,"text-danger"],[1,"row"],[1,"col-md-6","col-lg-3"],[1,"media","align-items-center"],["nzIcon","dollar",1,"ant-avatar-blue",3,"nzSize"],[1,"m-l-15"],[1,"m-b-0","text-muted"],["nzIcon","line-chart",1,"ant-avatar-cyan",3,"nzSize"],["nzIcon","profile",1,"ant-avatar-gold",3,"nzSize"],["nzIcon","user",1,"ant-avatar-purple",3,"nzSize"]],template:function(e,t){1&e&&(O.TgZ(0,"div",0),O.TgZ(1,"div",1),O.TgZ(2,"div",2),O._UZ(3,"nz-avatar",3),O.TgZ(4,"div",4),O.TgZ(5,"h4",5),O._uU(6,"Welcome back, Nichols!"),O.qZA(),O.TgZ(7,"span",6),O._uU(8,"Project Manager"),O.qZA(),O.qZA(),O.qZA(),O.TgZ(9,"div",7),O.TgZ(10,"div",8),O.TgZ(11,"div",9),O._UZ(12,"i",10),O.qZA(),O.TgZ(13,"div",11),O.TgZ(14,"h2",12),O._uU(15,"78"),O.qZA(),O.TgZ(16,"span",6),O._uU(17,"Tasks"),O.qZA(),O.qZA(),O.qZA(),O.TgZ(18,"div",8),O.TgZ(19,"div",9),O._UZ(20,"i",13),O.qZA(),O.TgZ(21,"div",11),O.TgZ(22,"h2",12),O._uU(23,"21"),O.qZA(),O.TgZ(24,"span",6),O._uU(25,"Projects"),O.qZA(),O.qZA(),O.qZA(),O.TgZ(26,"div",14),O.TgZ(27,"div",9),O._UZ(28,"i",15),O.qZA(),O.TgZ(29,"div",11),O.TgZ(30,"h2",12),O._uU(31,"39"),O.qZA(),O.TgZ(32,"span",6),O._uU(33,"Members"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(34,"div",16),O.TgZ(35,"div",17),O.TgZ(36,"nz-card"),O.TgZ(37,"div",18),O._UZ(38,"nz-avatar",19),O.TgZ(39,"div",20),O.TgZ(40,"h2",5),O._uU(41,"$23,523"),O.qZA(),O.TgZ(42,"p",21),O._uU(43,"Profit"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(44,"div",17),O.TgZ(45,"nz-card"),O.TgZ(46,"div",18),O._UZ(47,"nz-avatar",22),O.TgZ(48,"div",20),O.TgZ(49,"h2",5),O._uU(50,"+ 17.21%"),O.qZA(),O.TgZ(51,"p",21),O._uU(52,"Growth"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(53,"div",17),O.TgZ(54,"nz-card"),O.TgZ(55,"div",18),O._UZ(56,"nz-avatar",23),O.TgZ(57,"div",20),O.TgZ(58,"h2",5),O._uU(59,"3,685"),O.qZA(),O.TgZ(60,"p",21),O._uU(61,"Orders"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.TgZ(62,"div",17),O.TgZ(63,"nz-card"),O.TgZ(64,"div",18),O._UZ(65,"nz-avatar",24),O.TgZ(66,"div",20),O.TgZ(67,"h2",5),O._uU(68,"1,832"),O.qZA(),O.TgZ(69,"p",21),O._uU(70,"Customers"),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA(),O.qZA()),2&e&&(O.xp6(3),O.Q6J("nzSize",50),O.xp6(35),O.Q6J("nzSize",60),O.xp6(9),O.Q6J("nzSize",50),O.xp6(9),O.Q6J("nzSize",50),O.xp6(9),O.Q6J("nzSize",50))},directives:[$.Dz,ee.Ls,te.bd],styles:[""]}),e}(),ne={entity_type_id:2},oe={},ae=[{templateOptions:{label:"Formulaire de cr\xe9ation",toggleable:!0},fieldGroup:[{},{fieldGroupClassName:"d-flex flex-wrap",fieldGroup:[{className:"flex-3 wl-hidden",key:"id",type:"input",templateOptions:{translate:!0,label:"ID",readonly:!0}},{className:"flex-3",key:"entity_id",type:"select",templateOptions:{translate:!0,required:!0,translatePlaceholder:!0,label:"ENTITY",placeholder:"ENTITY",suffixIcon:"user",options:[],valueProp:"id",labelProp:"name"},hideExpression:"model.id"},{className:"flex-3",key:"code",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,label:"Matricule",placeholder:"Matricule"}},{className:"flex-3",key:"first_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Nom",placeholder:"Nom",suffixIcon:"user"}},{className:"flex-3",key:"last_name",type:"input",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Pr\xe9noms",placeholder:"Pr\xe9noms",suffixIcon:"user"}},{className:"flex-3",key:"email",type:"input-email",templateOptions:{translate:!0,translatePlaceholder:!0,required:!0,label:"Email",placeholder:"Email",suffixIcon:"mail",pattern:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/},validation:{messages:{pattern:function(e,t){return'"'.concat(t.formControl.value,"\" n'est pas une adresse email valide")}}}},{className:"flex-3",fieldGroupClassName:"d-flex search-input",fieldGroup:[{className:"inline flex-3",key:"prefix",type:"select",templateOptions:{translate:!0,showSearch:!0,label:"Telephone",labelProp:"phone_prefix",valueProp:"phone_prefix",options:[]},expressionProperties:{"templateOptions.required":"model.phone"},defaultValue:"+225"},{className:"inline flex-7",key:"phone",type:"input",templateOptions:{suffixIcon:"phone",type:"number",minLength:6,maxLength:10},validation:{messages:{pattern:function(e,t){return"Le num\xe9ro ".concat(t.formControl.value," n'est pas valide")}}},validators:{validation:[function(){function e(){i(this,e)}return o(e,null,[{key:"maxLength",value:function(e){return function(t){return t.value?(t.value.length>e&&t.setValue(t.value.substring(0,e)),null):null}}}]),e}().maxLength(10)]}}]},{className:"flex-3",key:"login",type:"input",templateOptions:{translate:!0,label:"Login",required:!0,autocomplete:!1}},{className:"flex-3",key:"password",type:"input",templateOptions:{type:"password",translate:!0,required:!0,translatePlaceholder:!0,pattern:"^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$",label:"Mot de passe",placeholder:"Mot de passe"},validation:{messages:{pattern:function(e,t){return"Le mot de passe doit contenir au moins 8 caract\xe8res, 1 caract\xe8re special, 1 nombre, 1 majuscule et une minuscule"}}}},{className:"flex-1",key:"is_root",type:"checkbox",templateOptions:{translate:!0,label:"Est root ?"},defaultValue:!1},{className:"flex-3",key:"is_admin",type:"checkbox",templateOptions:{translate:!0,label:"Est admin ?"},defaultValue:!0},{className:"flex-3",key:"status",type:"checkbox",templateOptions:{translate:!0,label:"Est actif ?"},defaultValue:!0}]},{fieldGroupClassName:"action-bloc",fieldGroup:[{className:"flex-1",type:"button",templateOptions:{type:"submit",label:"Soumettre",translate:!0,loading:!1,disabled:!0,colorType:"primary",click:function(e){e.templateOptions.loading=!0,e.form.statusChanges.subscribe(function(t){e.templateOptions.loading&&(e.templateOptions.loading=!1)})}},expressionProperties:{"templateOptions.disabled":function(e,t,i){return!i.form.valid}}},{type:"button",templateOptions:{type:"reset",label:"R\xe9initialiser",bgColor:"#000",textColor:"#fff",click:function(e){e.options.resetModel(ne)}}}]}]}],re=[{path:"",component:ie},{path:"create",canActivate:[K],component:L,data:{title:"Cr\xe9er",breadcrumb:"Cr\xe9er"}},{path:"user-profile",canActivate:[W],component:E,data:{title:"Autorisation",breadcrumb:"Autorisation"}},{path:"user-permission",canActivate:[H],component:P,data:{title:"Permission utilisateur",breadcrumb:"Permission utilisateur"}},{path:"sso",canActivate:[X],component:Y,data:{title:"SSO_Synchronisation",breadcrumb:"SSO_Synchronisation"}},{path:"list",canActivate:[B],component:Q,data:{title:"Liste",breadcrumb:"Liste"}},{path:"users-management",component:ie,data:{title:"UsersManagement",breadcrumb:"UsersManagement"}},{path:"users",component:(G=function(e){a(n,e);var t=s(n);function n(e,o,a,r,s,l){var c;return i(this,n),(c=t.call(this,e,o,a,r,s,l)).logger=e,c.httpService=o,c.envService=a,c.messageService=r,c.authService=s,c.menuService=l,c}return o(n,[{key:"ngOnInit",value:function(){var e=this;this.form.model=ne,this.form.options=oe,this.form.fields=ae,this.isSpinning=!1,this.globalFilterFields=["id"],this.columns=[{field:"id",header:"ID"},{field:"status",header:"STATUS",type:"status"},{field:"created_at",header:"CREATED_AT",type:"date"},{field:"updated_at",header:"UPDATED_AT",type:"date"}],this.actions=[{type:"default",icon:"edit",shape:"circle",loading:!1,click:function(t){e.edit(t),e.form.model=Object.assign({},t)}},{type:"default",icon:"delete",shape:"circle",popConfirm:!0,popTitle:"Are-you sure ?",loading:!1,click:function(t){e.delete(t,"users")},cancel:function(e){}}]}},{key:"save",value:function(e){this.logger.log("model: ",e.model);var t=Object.assign({},e.model);t=Object.assign(Object.assign({},t),t.id&&null!=t.id?{updated_user:this.user.id}:{added_user:this.user.id})}},{key:"loadData",value:function(e){var t=this;console.log(e),setTimeout(function(){t.loading=!0},1e3)}}]),n}(h.K),G.\u0275fac=function(e){return new(e||G)(O.Y36(T.Kf),O.Y36(S.O),O.Y36(x.L),O.Y36(A.dD),O.Y36(_.e),O.Y36(k.h))},G.\u0275cmp=O.Xpm({type:G,selectors:[["users"]],features:[O.qOj],decls:3,vars:18,consts:[["nzTip","Loading...",3,"nzSpinning"],[3,"alert","model","fields","options","onSubmit","onModelChange"],[3,"data","wrapper","columns","actions","lazy","caption","paginator","rows","totalRecords","loading","globalFilterFields","onLazyLoad"]],template:function(e,t){1&e&&(O.TgZ(0,"nz-spin",0),O.TgZ(1,"wl-form",1),O.NdJ("onSubmit",function(e){return t.save(e)})("onModelChange",function(e){return t.modelChange(e)}),O.qZA(),O.qZA(),O.TgZ(2,"wl-table",2),O.NdJ("onLazyLoad",function(e){return t.loadData(e)}),O.qZA()),2&e&&(O.Q6J("nzSpinning",t.isSpinning),O.xp6(1),O.Q6J("alert",t.alert)("model",t.form.model)("fields",t.form.fields)("options",t.form.options),O.xp6(1),O.Udp("margin-top","1rem"),O.Q6J("data",t.data)("wrapper","fieldset")("columns",t.columns)("actions",t.actions)("lazy",!0)("caption","Users ")("paginator",!0)("rows",t.rows)("totalRecords",t.totalRecords)("loading",t.loading)("globalFilterFields",t.globalFilterFields))},directives:[p.W,c.U,u.a],styles:[""]}),G),data:{title:"Users",breadcrumb:"Users"}}],se=function(){var e=o(function e(){i(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=O.oAB({type:e}),e.\u0275inj=O.cJS({imports:[[m.Bz.forChild(re)],m.Bz]}),e}(),le=((V=o(function e(){i(this,e)})).\u0275fac=function(e){return new(e||V)},V.\u0275mod=O.oAB({type:V}),V.\u0275inj=O.cJS({imports:[[l.ez,se,c.e,u.n,p.j,d.Qp,f.Q,$.Rt,ee.PV,te.vh]]}),V)}}])}();